/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){var ka,tc,r,Ka,lb,X,Y,Fb,fa,Vb,H,s,la,va,Ua,Z,aa,D,Wb,Gb,m,mb,Xb,ra,za,ga,Aa,Va,uc,vc,Ba,Ca,Hb,Da,La,Yb,Wa,Xa,Ma,Ya,I,wc,Zb,nb,N,J,$b,ba,ha,k,ma,Za,Na,$a,S,K,ab,Oa,Ea,ca,$,da,sa,bb,wa,Pa,Qa,na,z,O,cb,ob,db,Fc,ac,xc,bc,P,oa,cc,pb,dc,ec,eb,g,fc,Ib,Jb,ia,yc,e,Q,fb,Kb,Lb,F,Ra,Mb,ja,qb,ea,gc,Nb,rb,hc,sb,Ob,Pb,y,T,Qb,ic,jc,v,R,gb,tb,ub,L,Rb,pa,Sa,kc,Fa,vb,o,w,ta,xa,lc,Sb,mc,wb,Ga,nc,Ha,zc,qa,xb,hb,U,oc,M,V,Tb,yb,Ia,C,Ac,Gc,x,pc,n;function j(a,b){function c(){}c.prototype=a;var d=
new c,f;for(f in b)d[f]=b[f];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function Hc(a){return a instanceof Array?function(){return q.iter(a)}:"function"==typeof a.iterator?G(a,a.iterator):a.iterator}function G(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Nc++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}
var A=function(){return x.__string_rec(this,"")},ib=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};ib.__name__=!0;ib.prototype={matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];else throw"EReg::matched";return a},match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:ib};var q=function(){};
q.__name__=!0;q.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};q.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};q.remove=function(a,b){for(var c=0,d=a.length;c<d;){if(a[c]==b)return a.splice(c,1),!0;c++}return!1};q.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Bc=function(){};Bc.__name__=
!0;Bc.array=function(a){for(var b=[],a=Hc(a)();a.hasNext();){var c=a.next();b.push(c)}return b};Bc.count=function(a,b){var c=0;if(null==b)for(var d=Hc(a)();d.hasNext();)d.next(),c++;else for(d=Hc(a)();d.hasNext();){var f=d.next();b(f)&&c++}return c};var Ic=function(){};Ic.__name__=!0;var qc=function(){};qc.__name__=!0;qc.field=function(a,b){var c=null;try{c=a[b]}catch(d){}return c};var B=function(){};B.__name__=!0;B.string=function(a){return x.__string_rec(a,"")};B.parseInt=function(a){var b=parseInt(a,
10);if(0==b&&(120==q.cca(a,1)||88==q.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};B.parseFloat=function(a){return parseFloat(a)};var rc=function(){this.b=""};rc.__name__=!0;rc.prototype={addSub:function(a,b,c){this.b+=null==c?q.substr(a,b,null):q.substr(a,b,c)},__class__:rc};var Jc=function(){};Jc.__name__=!0;Jc.hex=function(a,b){var c="";do c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4;while(0<a);if(null!=b)for(;c.length<b;)c="0"+c;return c};var p=function(){};p.__name__=!0;p.parse=function(a){return Ia.Parser.parse(a)};
p.createElement=function(a){var b=new p;b.nodeType=p.Element;b._children=[];b._attributes=new C.StringMap;b.set_nodeName(a);return b};p.createPCData=function(a){var b=new p;b.nodeType=p.PCData;b.set_nodeValue(a);return b};p.createCData=function(a){var b=new p;b.nodeType=p.CData;b.set_nodeValue(a);return b};p.createComment=function(a){var b=new p;b.nodeType=p.Comment;b.set_nodeValue(a);return b};p.createDocType=function(a){var b=new p;b.nodeType=p.DocType;b.set_nodeValue(a);return b};p.createProcessingInstruction=
function(a){var b=new p;b.nodeType=p.ProcessingInstruction;b.set_nodeValue(a);return b};p.createDocument=function(){var a=new p;a.nodeType=p.Document;a._children=[];return a};p.prototype={addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&q.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];if(c.nodeType==p.Element)return c;
a++}return null},firstChild:function(){if(null==this._children)throw"bad nodetype";return this._children[0]},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==p.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var c=this.x[a],a=a+1;if(c.nodeType==p.Element)return this.cur=a,c}return null}}},exists:function(a){if(this.nodeType!=p.Element)throw"bad nodeType";
return this._attributes.exists(a)},set:function(a,b){if(this.nodeType!=p.Element)throw"bad nodeType";this._attributes.set(a,b)},set_nodeValue:function(a){if(this.nodeType==p.Element||this.nodeType==p.Document)throw"bad nodeType";return this._nodeValue=a},get_nodeValue:function(){if(this.nodeType==p.Element||this.nodeType==p.Document)throw"bad nodeType";return this._nodeValue},set_nodeName:function(a){if(this.nodeType!=p.Element)throw"bad nodeType";return this._nodeName=a},get_nodeName:function(){if(this.nodeType!=
p.Element)throw"bad nodeType";return this._nodeName},__class__:p};var W,u,zb,Cc;Ha=function(){};zc=void 0;qa=void 0;xb=void 0;hb=void 0;U=void 0;oc=void 0;M=void 0;V=void 0;Tb=void 0;yb=void 0;Ha.__name__=!0;Ha.prototype={__class__:Ha};W=function(){};W.__name__=!0;W.__interfaces__=[Ha];W.prototype={init:function(a,b){this.owner=a;this.next=b},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},onAdded:function(){},
__class__:W};var ya,t,Ja,jb;ya=function(a){this._node=a};ya.__name__=!0;ya.__super__=W;ya.prototype=j(W.prototype,{onRemoved:function(){W.prototype.onRemoved.call(this);this._node.onExit()},onUpdate:function(a){W.prototype.onUpdate.call(this,a);this._node.update(a)},onAdded:function(){W.prototype.onAdded.call(this);this._node.onEnter()},get_name:function(){return"CCComponent_3"},__class__:ya});t=function(){this._winSizeInPoints=this._scenesStack=this._projectionDelegate=this._scheduler=this._actionManager=
null;this._animationInterval=this._oldAnimationInterval=this._projection=this._contentScaleFactor=0};t.__name__=!0;t.getInstance=function(){t.firstUseDirector&&(t.firstUseDirector=!1,t.s_SharedDirector=new t,t.s_SharedDirector.init());return t.s_SharedDirector};t.prototype={getPointerDispatcher:function(){return this._pointerDispatcher},getActionManager:function(){return this._actionManager},runWithScene:function(a){this.director.pushScene(a.getEntity())},replaceScene:function(a){this.popScene();
x.__instanceof(a,na)?this.director.pushScene(x.__cast(a,na).getInScene().entity):this.director.pushScene(a.entity);this.length++},popScene:function(){this.director.popScene();this.length--},getWinSize:function(){return this._winSizeInPoints},init:function(){this._oldAnimationInterval=this._animationInterval=1/t.defaultFPS;this._scenesStack=[];this._projection=t.DIRECTOR_PROJECTION_DEFAULT;this._projectionDelegate=null;this._contentScaleFactor=1;this._scheduler=new Ja;this._actionManager=new $b;this._winSizeInPoints=
new N(u._platform.getStage().get_width(),u._platform.getStage().get_height());this._pointerDispatcher=new I;this.length=0;this.director=new lc;u.root.add(this.director)},__class__:t};jb=function(){};jb.__name__=!0;Ja=function(){};Ja.__name__=!0;Ja.ArrayRemoveObject_sample_Enemy=function(a,b){q.remove(a,b)};Ja.ArrayRemoveObject_cc_touchdispatcher_CCPointerHandler=function(a,b){q.remove(a,b)};Ja.ArrayAppendObjectToIndex_cc_touchdispatcher_CCPointerHandler=function(a,b,c){var d=a.splice(0,c),a=a.slice(c);
d.push(b);return a=d.concat(a)};Ja.prototype={__class__:Ja};$b=void 0;ba=void 0;ha=void 0;k=void 0;ma=void 0;Za=void 0;Na=void 0;$a=void 0;S=void 0;K=void 0;ab=void 0;Oa=void 0;Ea=void 0;ca=void 0;$=void 0;da=void 0;sa=void 0;bb=void 0;wa=void 0;Pa=void 0;Qa=void 0;ba=function(){this._tag=ba.ACTION_TAG_INVALID};ba.__name__=!0;ba.create=function(){return new ba};ba.prototype={setAnimation:function(a){this._animation=a},setTag:function(a){this._tag=a},getTag:function(){return this._tag},update:function(){},
step:function(){null},stop:function(){this._target=null},startWithTarget:function(a){this._target=this._originalTarget=a},isDone:function(){return!0},__class__:ba};ha=function(){this._duration=0;ba.call(this);this._duration=0};ha.__name__=!0;ha.__super__=ba;ha.prototype=j(ba.prototype,{stop:function(){ba.prototype.stop.call(this)},update:function(a){ba.prototype.update.call(this,a)},getDuration:function(){return this._duration},__class__:ha});k=function(){ha.call(this);this._elapsed=0;this._firstTick=
!1};k.__name__=!0;k.__super__=ha;k.prototype=j(ha.prototype,{startWithTarget:function(a){ha.prototype.startWithTarget.call(this,a);this._elapsed=0;this._firstTick=!0},stop:function(){ha.prototype.stop.call(this)},update:function(a){ha.prototype.update.call(this,a)},step:function(a){this._firstTick?(this._firstTick=!1,this._elapsed=0):this._elapsed+=a;1.192092896E-7>this._duration&&(this._duration=1.192092896E-7);a=this._elapsed/this._duration;1<a&&(a=1);0>a&&(a=0);this.update(a)},isDone:function(){return this._elapsed>=
this._duration},initWithDuration:function(a){this._duration=a;this._elapsed=0;return this._firstTick=!0},getElapsed:function(){return this._elapsed},__class__:k});ma=function(){k.call(this)};ma.__name__=!0;ma.create=function(a){var b=new ma;null!=b&&b.initWithAction(a);return b};ma.__super__=k;ma.prototype=j(k.prototype,{update:function(a){this._other.update(a)},stop:function(){this._other.stop();k.prototype.stop.call(this)},startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);this._other.startWithTarget(this._target)},
initWithAction:function(a){Va.assert(null!=a,"");return this.initWithDuration(a.getDuration())?(this._other=a,!0):!1},__class__:ma});Za=function(){ma.call(this)};Za.__name__=!0;Za.create=function(a){var b=new Za;null!=b&&b.initWithAction(a);return b};Za.__super__=ma;Za.prototype=j(ma.prototype,{update:function(a){this._other.update(1==a?1:-Math.pow(2,10*a)+1)},__class__:Za});Na=function(){ma.call(this)};Na.__name__=!0;Na.create=function(a){var b=new Na;null!=b&&b.initWithAction(a);return b};Na.__super__=
ma;Na.prototype=j(ma.prototype,{update:function(a){this._other.update(Math.sin(a*Math.PI/2))},__class__:Na});$a=function(){ha.call(this)};$a.__name__=!0;$a.__super__=ha;$a.prototype=j(ha.prototype,{update:function(){},step:function(){this.update(1)},isDone:function(){return!0},__class__:$a});S=function(){$a.call(this)};S.__name__=!0;S.create=function(a){var b=new S;return null!=b?(b._callFunc=a,b):null};S.__super__=$a;S.prototype=j($a.prototype,{update:function(){this.execute()},execute:function(){null!=
this._callFunc&&this._callFunc()},__class__:S});K=function(){k.call(this);this._actions=[]};K.__name__=!0;K.create=function(a){for(var b=a[0],c=1,d=a.length;c<d;){var f=c++;null!=a[f]&&(b=K._actionOneTwo(b,a[f]))}return b};K._actionOneTwo=function(a,b){var c=new K;c.initOneTwo(a,b);return c};K.__super__=k;K.prototype=j(k.prototype,{update:function(a){k.prototype.update.call(this,a);var b=0,c=0;a<this._split?b=0!=this._split?a/this._split:1:(c=1,b=1==this._split?1:(a-this._split)/(1-this._split),-1==
this._last&&(this._actions[0].startWithTarget(this._target),this._actions[0].update(1),this._actions[0].stop()),0==this._last&&(this._actions[0].update(1),this._actions[0].stop()));this._last==c&&this._actions[c].isDone()||(this._last!=c&&this._actions[c].startWithTarget(this._target),this._actions[c].update(b),this._last=c)},startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);this._split=this._actions[0].getDuration()/this._duration;this._last=-1},initOneTwo:function(a,b){a.getDuration();
b.getDuration();this.initWithDuration(a.getDuration()+b.getDuration());this._actions[0]=a;this._actions[1]=b;return!0},__class__:K});ab=function(){k.call(this)};ab.__name__=!0;ab.create=function(a){var b=new ab;return null!=b&&b.initWithAction(a)?b:null};ab.__super__=k;ab.prototype=j(k.prototype,{isDone:function(){return!1},step:function(a){this._innerAction.step(a);this._innerAction.isDone()&&(this._innerAction.startWithTarget(this._target),this._innerAction.step(this._innerAction.getElapsed()-this._innerAction.getDuration()))},
startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);this._innerAction.startWithTarget(a)},initWithAction:function(a){this._innerAction=a;return!0},__class__:ab});Oa=function(){this.timer=0;k.call(this)};Oa.__name__=!0;Oa.create=function(a){var b=new Oa;b.initWithAnimation(a);return b};Oa.__super__=k;Oa.prototype=j(k.prototype,{stop:function(){this._animation.getRestoreOriginalFrame()&&null!=this._target&&x.__cast(this._target,m).setDisplayFrame(this._origFrame);k.prototype.stop.call(this)},
update:function(a){1>a&&(a*=this._animation.getLoops(),a>this._excutedLoops&&(this._nextFrame=0,this._excutedLoops++),this.timer=a%1);for(var b=this._animation.getFrames(),c=b.length,d=this._nextFrame;d<c;){var f=d++;if(this._splitTimes[f]<a){x.__cast(this._target,m).setDisplayFrame(b[f].getSpriteFrame());this._nextFrame=f+1;break}}},startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);this._animation.getRestoreOriginalFrame()&&(this._origFrame=x.__cast(a,m).displayFrame());this._excutedLoops=
this._nextFrame=0},initWithAnimation:function(a){var b=a.getDuration();this.initWithDuration(b*a.getLoops());this._nextFrame=0;this.setAnimation(a);this._origFrame=this._animation.getFrames()[0].getSpriteFrame();this._excutedLoops=0;this._splitTimes=[];for(var c=0,d=b/a.getTotalDelayUnits(),a=a.getFrames(),f=0;f<a.length;){var h=a[f];++f;var e=c*d/b,c=c+h.getDelayUnits();this._splitTimes.push(e)}this._delatPerUnit=this._animation.getDelayPerUnit();return!0},__class__:Oa});Ea=function(){this._angle=
0;k.call(this)};Ea.__name__=!0;Ea.create=function(a,b){var c=new Ea;c.initWithDurationRotateBy(a,b);return c};Ea.__super__=k;Ea.prototype=j(k.prototype,{startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);this._target.getSprite().rotation.animateBy(this._angle,this._duration,this._ease)},initWithDurationRotateBy:function(a,b){return k.prototype.initWithDuration.call(this,a)?(this._angle=b,!0):!1},__class__:Ea});ca=function(){this._isMoveTo=!0;k.call(this);this._endPosition=new o(0,
0);this._startPosition=new o(0,0);this._delta=new o(0,0);this._previousPosition=new o(0,0)};ca.__name__=!0;ca.create=function(a,b){var c=new ca;c.initWithDurationMoveTo(a,b);return c};ca.__super__=k;ca.prototype=j(k.prototype,{update:function(a){if(null!=this._target){var b=this._target.getPosition(),b=Gb.pSub(b,this._previousPosition);this._startPosition=Gb.pAdd(this._startPosition,b);a=new o(this._startPosition.x+this._delta.x*a,this._startPosition.y+this._delta.y*a);this._target.setPosition(a.x,
a.y);this._previousPosition=a}},startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);null!=this._target.getSprite()&&(this._previousPosition=this._startPosition=a.getPosition(),this._delta=Gb.pSub(this._endPosition,this._startPosition))},initWithDurationMoveTo:function(a,b){return k.prototype.initWithDuration.call(this,a)?(this._endPosition=b,!0):!1},__class__:ca});$=function(){ca.call(this)};$.__name__=!0;$.create=function(a,b){var c=new $;c.initWithDurationMoveBy(a,b);return c};
$.__super__=ca;$.prototype=j(ca.prototype,{startWithTarget:function(a){var b=this._delta;ca.prototype.startWithTarget.call(this,a);null!=this._target.getSprite()&&(this._delta=b)},initWithDurationMoveBy:function(a,b){return ca.prototype.initWithDurationMoveTo.call(this,a,b)?(this._delta=b,this._isMoveTo=!1,!0):!1},__class__:$});da=function(){k.call(this);this._startScaleY=this._startScaleX=this._scaleY=this._scaleX=1;this._deltaY=this._deltaX=this._endScaleY=this._endScaleX=0};da.__name__=!0;da.create=
function(a,b,c){var d=new da;null==c?d.initWithDurationScaleTo(a,b):d.initWithDurationScaleTo(a,b,c);return d};da.__super__=k;da.prototype=j(k.prototype,{update:function(a){null!=this._target&&this._target.setScale(this._startScaleX+this._deltaX*a,this._startScaleY+this._deltaY*a)},startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);this._startScaleX=a.getScaleX();this._startScaleY=a.getScaleY();this._deltaX=this._endScaleX-this._startScaleX;this._deltaY=this._endScaleY-this._startScaleY},
initWithDurationScaleTo:function(a,b,c){return k.prototype.initWithDuration.call(this,a)?(this._endScaleX=b,this._endScaleY=null!=c?c:b,!0):!1},__class__:da});sa=function(){da.call(this)};sa.__name__=!0;sa.create=function(a,b,c){var d=new sa;null==c?d.initWithDurationScaleTo(a,b):d.initWithDurationScaleTo(a,b,c);return d};sa.__super__=da;sa.prototype=j(da.prototype,{startWithTarget:function(a){da.prototype.startWithTarget.call(this,a);this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX;
this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},__class__:sa});bb=function(){this._times=0;k.call(this)};bb.__name__=!0;bb.create=function(a,b){var c=new bb;c.initWithDurationBlink(a,b);return c};bb.__super__=k;bb.prototype=j(k.prototype,{stop:function(){this._target.setVisible(this._originalState);k.prototype.stop.call(this)},startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);this._originalState=a.isVisible()},update:function(a){if(null!=this._target&&!this.isDone()){var b=
1/this._times;this._target.setVisible(a%b>b/2?!0:!1)}},initWithDurationBlink:function(a,b){return k.prototype.initWithDuration.call(this,a)?(this._times=b,!0):!1},__class__:bb});wa=function(){k.call(this)};wa.__name__=!0;wa.create=function(a){var b=new wa;b.initWithDuration(a);return b};wa.__super__=k;wa.prototype=j(k.prototype,{update:function(a){this._target.setOpacity(255*(1-a)|0)},__class__:wa});Pa=function(){this._toOpacity=this._fromOpacity=0;k.call(this)};Pa.__name__=!0;Pa.create=function(a,
b){var c=new Pa;c.initWithDurationFadeTo(a,b);return c};Pa.__super__=k;Pa.prototype=j(k.prototype,{startWithTarget:function(a){k.prototype.startWithTarget.call(this,a);this._fromOpacity=a.getOpacity()},update:function(a){null!=this._target&&this._target.setOpacity(this._fromOpacity+(this._toOpacity-this._fromOpacity)*a|0)},initWithDurationFadeTo:function(a,b){return k.prototype.initWithDuration.call(this,a)?(this._toOpacity=b,!0):!1},__class__:Pa});Qa=function(){k.call(this)};Qa.__name__=!0;Qa.create=
function(a){var b=new Qa;b.initWithDuration(a);return b};Qa.__super__=k;Qa.prototype=j(k.prototype,{update:function(){},__class__:Qa});$b=function(){this._targets=[]};$b.__name__=!0;$b.prototype={__class__:$b};D=function(){this._running=this._ignoreAnchorPointForPosition=this._initializedNode=!1;this._visible=!0;this._scaleX=this._scaleY=1;this._rotation=0;this._initNode()};Wb=void 0;D.__name__=!0;D.prototype={getSprite:function(){return this.sprite},getEntity:function(){return this.entity},unscheduleAllCallbacks:function(){this.cbUpdate=
[]},schedule:function(a,b){this.cbUpdate.push(new Wb(a,b))},update:function(a){for(var b=0,c=this.cbUpdate;b<c.length;){var d=c[b];++b;0>=d.curTimer&&(d.fun(),d.curTimer=d.interval);d.curTimer-=a}d=[];b=0;for(c=this.actions;b<c.length;){var f=c[b];++b;null!=f&&f.step(a);f.isDone()&&d.push(f)}if(null!=d)for(b=0;b<d.length;)a=d[b],++b,q.remove(this.actions,a)},getOpacity:function(){return 0},setOpacity:function(){},getActionByTag:function(a){for(var b=0,c=this.actions;b<c.length;){var d=c[b];++b;if(d.getTag()==
a)return d}return null},stopActionByTag:function(a){for(var b=ba.create(),c=0,d=this.actions;c<d.length;){var f=d[c];++c;if(f.getTag()==a){b=f;break}}q.remove(this.actions,b)},stopAction:function(a){q.remove(this.actions,a)},runAction:function(a){for(var b=0,c=this.actions;b<c.length;){var d=c[b];++b;if(d==a)return this.action}this.actions.push(a);a.startWithTarget(this);return a},onExit:function(){this._running=!1},onEnter:function(){this._running=!0},_detachChild:function(a,b){q.remove(this._children,
a);this.entity.removeChild(a.getEntity());a._parent=null;b&&a.cleanup()},removeChild:function(a,b){null!=this._children&&this._detachChild(a,b)},removeFromParentAndCleanup:function(){this.removeFromParent(!0)},removeFromParent:function(a){null!=this._parent&&this._parent.removeChild(this,a)},addChild:function(a,b,c){if(a!=this)if(Va.assert(null!=a,"Argument must be non-nil"),null!=a._parent)Va.assert(null==a._parent,"child already added. It can't be added again");else{var d=0;null==c?a.getTag():d=
c;a._tag=d;a.setParent(this);this.entity.addChild(a.entity,!0,b);this._children.push(a)}},getChildByTag:function(a){Va.assert(a!=D.NODE_TAG_INVALID,"Invalid tag");if(null!=this._children)for(var b=0,c=this._children.length;b<c;){var d=this._children[b++];if(null!=d&&d._tag==a)return d}return null},cleanup:function(){this.unscheduleAllCallbacks()},getTag:function(){return this._tag},ignoreAnchorPointForPosition:function(a){a!=this._ignoreAnchorPointForPosition&&(this._ignoreAnchorPointForPosition=
a,this.setCenterAnchor())},setParent:function(a){this._parent=a},getParent:function(){return this._parent},setContentSize:function(a){this._contentSize=new N(a.width,a.height)},getContentSize:function(){return this._contentSize},setCenterAnchor:function(){this.sprite.centerAnchor();this._anchorPoint.set(this.sprite.anchorX._value,this.sprite.anchorY._value)},setAnchorPoint:function(a){this._anchorPoint.set(a.x,a.y);this.sprite.setAnchor(a.x,a.y)},setVisible:function(a){this._visible=a;this.sprite.set_visible(a)},
isVisible:function(){return this._visible},getChildren:function(){null==this._children&&(this._children=[]);return this._children},getPosition:function(){return new o(this._position.x,this._position.y)},setPosition:function(a,b){this._position=new o(a,b);this.sprite.x.set__(this._position.x);this.sprite.y.set__(this._position.y)},getScaleY:function(){return this._scaleY},getScaleX:function(){return this._scaleX},setScale:function(a,b){this._scaleX=a;null==b?(this._scaleY=a,this.sprite.setScale(a)):
(this._scaleY=b,this.sprite.setScaleXY(this._scaleX,this._scaleY))},getScale:function(){Va.assert(this._scaleX==this._scaleY,"cc.Node#scale. ScaleX != ScaleY. Don't know which one to return");return this._scaleX},setRotation:function(a){this._rotation!=a&&(this._rotation=a,null!=this.sprite&&this.sprite.rotation.set__(this._rotation))},init:function(){!1==this._initializedNode&&this._initNode();return!0},_initNode:function(){1==uc.NODE_TRANSFORM_USING_AFFINE_MATRIX&&(this._transformGLDirty=!0);this._position=
new o(0,0);this._anchorPoint=new o(0,0);this._anchorPointInPoints=new o(0,0);this._contentSize=new N;var a=t.getInstance();this._initializedNode=!0;this._scaleY=this._scaleX=1;this._children=[];this._contentSize=a.getWinSize();this.entity=new zb;this.sprite=new v;this.cbUpdate=[];this.actions=[]},__class__:D};Wb=function(a,b){this.fun=a;this.interval=b;this.curTimer=0};Wb.__name__=!0;Wb.prototype={__class__:Wb};J=function(){};N=void 0;J.__name__=!0;J.p=function(a,b){return new o(a,b)};J.sizeZero=
function(){return new N(0,0)};J.rectZero=function(){return new w(0,0,0,0)};J.rectGetMaxX=function(a){return a.x+a.width};J.rectGetMinX=function(a){return a.x};J.rectGetMaxY=function(a){return a.y+a.height};J.rectGetMinY=function(a){return a.y};J.rectIntersectsRect=function(a,b){return!(J.rectGetMaxX(a)<J.rectGetMinX(b)||J.rectGetMaxX(b)<J.rectGetMinX(a)||J.rectGetMaxY(a)<J.rectGetMinY(b)||J.rectGetMaxY(b)<J.rectGetMinY(a))};N=function(a,b){null==b&&(b=0);null==a&&(a=0);this.width=a;this.height=b};
N.__name__=!0;N.prototype={__class__:N};aa=function(){this._pack=jb.pack;this.set__effectVolume(1);this.set__musicVolume(1);this._effectList=new C.StringMap;this._musicList=new C.StringMap};aa.__name__=!0;aa.getInstance=function(){null==aa._instance&&(aa._instance=new aa,aa._instance.init());return aa._instance};aa.prototype={stopMusic:function(){null!=this._playingMusic&&(this._playingMusic.dispose(),this._cacheMusic=this._playingMusic=null,this._isMusicPlaying=!1)},set__musicVolume:function(a){0>=
a?a=0:1<a&&(a=1);return this._musicVolume=a},set__effectVolume:function(a){0>=a?a=0:1<a&&(a=1);return this._effectVolume=a},playMusic:function(a,b){null==b&&(b=!1);var c=this._pack.getSound(a);null!=this._playingMusic&&(this._playingMusic.set_paused(!0),this._playingMusic.dispose());this._cacheMusic=c;this._playingMusic=b?c.loop(this.get__musicVolume()):c.play(this.get__musicVolume());this._isMusicLoop=b;this._isMusicPlaying=!0},playEffect:function(a,b){null==b&&(b=!1);var c=this._pack.getSound(a);
this._effectList.exists(a)&&this._effectList.get(a).dispose();b?this._effectList.set(a,c.loop(this.get__effectVolume())):this._effectList.set(a,c.play(this.get__effectVolume()))},init:function(){},get__musicVolume:function(){return this._musicVolume},get__effectVolume:function(){return this._effectVolume},__class__:aa};Z=function(){this._string=this._initialString="";D.call(this);this._imageOffset=new o(0,0)};Z.__name__=!0;Z.create=function(a,b,c,d,f){null==d&&(d=0);null==c&&(c=0);var h=new Z;null==
f&&(f=new o(0,0));h.initWithString(a,b,c,d,f);return h};Z.__super__=D;Z.prototype=j(D.prototype,{setString:function(a,b){null==b&&(b=!1);this._string!=a&&(this._initialString=this._string=a,this.updateString(b))},updateString:function(a){a||this._spriteText.set_text(this._string)},getAlign:function(a){var b=R.Left;switch(a){case 0:b=R.Left;break;case 1:b=R.Center;break;case 2:b=R.Right}return b},initWithString:function(a,b,c,d,f){null==d&&(d=0);null==c&&(c=0);null==f&&(f=new o(0,0));this._initialString=
a;this._font=new gb(jb.pack,b);this.sprite=new tb(this._font,a);this._spriteText=x.__cast(this.sprite,tb);this._spriteText.set_align(this.getAlign(d));this._spriteText.wrapWidth.set__(c);this._imageOffset=f;this.component=new ya(this);this.entity.add(this.sprite);this.entity.add(this.component);this._contentSize.width=this.sprite.getNaturalWidth();this._contentSize.height=this.sprite.getNaturalHeight();return!0},setOpacity:function(a){this._opacity=a;this.sprite.alpha.set__(this._opacity/255);if(null!=
this._children)for(var a=0,b=this._children.length;a<b;){var c=a++,c=x.__cast(this._children[c],Z);null!=c&&c.setOpacity(this._opacity)}},getOpacity:function(){return this._opacity},__class__:Z});wc=function(){};I=void 0;Zb=void 0;nb=void 0;wc.__name__=!0;wc.prototype={__class__:wc};z=function(){this._pointerPriority=0;this._isPointerEnabled=!1;D.call(this)};na=void 0;O=void 0;cb=void 0;z.__name__=!0;z.__interfaces__=[wc];z.__super__=D;z.prototype=j(D.prototype,{onPointerUp:function(){return!1},onPointerMoved:function(){return!1},
onPointerDragged:function(){return!1},onPointerDown:function(){return!1},onExit:function(){t.getInstance().getPointerDispatcher().removePointerDelegate(this);D.prototype.onExit.call(this)},onEnter:function(){t.getInstance();(this._isPointerEnabled=!0)&&this.registerWithTouchDispatcher();D.prototype.onEnter.call(this)},registerWithTouchDispatcher:function(){t.getInstance().getPointerDispatcher().addPointerDelegate(this,this._pointerPriority)},init:function(){this._initLayer();return!0},addComponent:function(){null==
this.component&&(this.component=new ya(this),this.entity.add(this.component),null==this.sprite&&(this.sprite=new v,this.entity.add(this.sprite)))},_initLayer:function(){this.setAnchorPoint(new o(0,0));this._ignoreAnchorPointForPosition=!0;this.setContentSize(t.getInstance().getWinSize());this._isPointerEnabled=!1;this._pointerPriority=0;this.addComponent()},__class__:z});O=function(){D.call(this)};O.__name__=!0;O.create=function(){return new O};O.__super__=D;O.prototype=j(D.prototype,{init:function(){D.prototype.init.call(this);
this.setAnchorPoint(new o(0,0));this.setContentSize(t.getInstance().getWinSize());return!0},__class__:O});na=function(){O.call(this)};na.__name__=!0;na.create=function(a,b){var c=new na;return null!=c&&c.initWithDuration(a,b)?c:null};na.__super__=O;na.prototype=j(O.prototype,{getInScene:function(){return this._inScene},initWithDuration:function(a,b){return this.init()?(this._duration=a,this.setPosition(0,0),this._inScene=b,!0):!1},__class__:na});cb=function(){na.call(this)};cb.__name__=!0;cb.create=
function(a,b){var c=new cb;c.initWithDuration(a,b);return c};cb.__super__=na;cb.prototype=j(na.prototype,{initWithDuration:function(a,b){na.prototype.initWithDuration.call(this,a,b);this.transition=new Sb(a);return!0},__class__:cb});H=function(){this._enabled=!1;this._state=-1;z.call(this);this.sprite=new v;this.entity.add(this.sprite);this.component=new ya(this);this.entity.add(this.component)};s=void 0;la=void 0;va=void 0;Ua=void 0;H.__name__=!0;H.create=function(a){var b=new H;0==a.length&&b.initWithItems(null);
b.initWithArray(a);return b};H.__super__=z;H.prototype=j(z.prototype,{_itemForTouch:function(a){a.getLocation();if(null!=this._children&&0<this._children.length)for(var b=0,c=this._children.length;b<c;){var d=b++,d=x.__cast(this._children[d],s);if(d.isVisible()&&d.isEnabled()&&d.rect().contains(a.getLocation().x,a.getLocation().y))return d}return null},onExit:function(){this._state==H.MENU_STATE_TRACKING_TOUCH&&(this._selectedItem.unselected(),this._state=H.MENU_STATE_WAITING,this._selectedItem=null);
z.prototype.onExit.call(this)},onPointerDragged:function(a){a=this._itemForTouch(a);a!=this._selectedItem&&(null!=this._selectedItem&&this._selectedItem.unselected(),this._selectedItem=a,null!=this._selectedItem&&this._selectedItem.selected());return!0},onPointerUp:function(){null!=this._selectedItem&&(this._selectedItem.unselected(),this._selectedItem.activate());this._state=H.MENU_STATE_WAITING;return!0},onPointerDown:function(a){if(this._state!=H.MENU_STATE_WAITING||!this._visible||!this._enabled)return!1;
for(var b=this._parent;null!=b;){if(!b.isVisible())return!1;b=b.getParent()}this._selectedItem=this._itemForTouch(a);return null!=this._selectedItem?(this._state=H.MENU_STATE_TRACKING_TOUCH,this._selectedItem.selected(),!0):!1},registerWithTouchDispatcher:function(){z.prototype.registerWithTouchDispatcher.call(this);t.getInstance().getPointerDispatcher().addPointerDelegate(this,H.MENU_HANDLER_PRIORITY)},alignVerticallyWithPadding:function(a){var b=a;if(null!=this._children&&0<this._children.length)for(var c=
0,d=this._children.length;c<d;){var f=c++;this._children[f].setPosition(0,b);b+=this._children[f].getContentSize().height*this._children[f].getScaleY()+a}},addChild:function(a,b,c){Va.assert(x.__instanceof(a,s),"Menu only supports MenuItem objects as children");z.prototype.addChild.call(this,a,b,c)},initWithArray:function(a){if(this.init()){this.registerWithTouchDispatcher();this._enabled=!0;var b=t.getInstance().getWinSize();this.ignoreAnchorPointForPosition(!0);this.setContentSize(b);if(null!=a)for(var b=
0,c=a.length;b<c;){var d=b++;this.addChild(a[d],d);a[d].setPosition(0,0)}this._selectedItem=null;this._state=H.MENU_STATE_WAITING;return!0}return!1},initWithItems:function(a){var b=[];if(null!=a)for(var c=0,d=a.length;c<d;){var f=c++;b.push(a[f])}return this.initWithArray(b)},__class__:H});s=function(){this._isSelected=this._isEnabled=!1;D.call(this);this.sprite=new v;this.entity.add(this.sprite);this.component=new ya(this);this.entity.add(this.component)};s.__name__=!0;s.__super__=D;s.prototype=
j(D.prototype,{activate:function(){this._isEnabled&&null!=this._selector&&this._selector()},setCallback:function(a,b){this._listener=b;this._selector=a},unselected:function(){this._isSelected=!1},selected:function(){this._isSelected=!0},rect:function(){return new w(this._position.x+this._parent._position.x-this._anchorPoint.x,this._position.y+this._parent._position.y-this._anchorPoint.y,this._contentSize.width,this._contentSize.height)},initWithCallback:function(a,b){this._listener=b;this._selector=
a;this._isEnabled=!0;this._isSelected=!1;return!0},setEnabled:function(a){this._isEnabled=a},isEnabled:function(){return this._isEnabled},__class__:s});la=function(){this._originalScale=0;s.call(this)};la.__name__=!0;la.create=function(a,b,c){var d=new la;d.initWithLabel(a,b,c);return d};la.__super__=s;la.prototype=j(s.prototype,{unselected:function(){if(this._isEnabled){s.prototype.unselected.call(this);this.stopActionByTag(s.ZOOM_ACTION_TAG);var a=da.create(0.1,this._originalScale);a.setTag(s.ZOOM_ACTION_TAG);
this.runAction(a)}},selected:function(){if(this._isEnabled){s.prototype.selected.call(this);var a=this.getActionByTag(s.ZOOM_ACTION_TAG);null!=a?this.stopAction(a):this._originalScale=this.getScale();a=da.create(0.1,1.2*this._originalScale);a.setTag(s.ZOOM_ACTION_TAG);this._label.runAction(a)}},activate:function(){this._isEnabled&&(this.setScale(this._originalScale),s.prototype.activate.call(this))},initWithLabel:function(a,b,c){this.initWithCallback(b,c);this._originalScale=1;this.setLabel(a);return!0},
getOpacity:function(){return this._label.getOpacity()},setOpacity:function(a){this._label.setOpacity(a)},setEnabled:function(a){s.prototype.setEnabled.call(this,a)},setLabel:function(a){null!=a&&(this.addChild(a),this.setContentSize(a.getContentSize()));null!=this._label&&this.removeChild(this._label,!0);this._label=a},__class__:la});va=function(){s.call(this)};va.__name__=!0;va.create=function(a,b,c,d,f){var h=new va;h.initWithNormalSprite(a,b,c,d,f);return h};va.__super__=s;va.prototype=j(s.prototype,
{_updateImagesVisibility:function(){this._isEnabled?(null!=this._normalImage&&this._normalImage.setVisible(!0),null!=this._selectedImage&&this._selectedImage.setVisible(!1),null!=this._disabledImage&&this._disabledImage.setVisible(!1)):null!=this._disabledImage?(null!=this._normalImage&&this._normalImage.setVisible(!1),null!=this._selectedImage&&this._selectedImage.setVisible(!1),null!=this._disabledImage&&this._disabledImage.setVisible(!0)):(null!=this._normalImage&&this._normalImage.setVisible(!0),
null!=this._selectedImage&&this._selectedImage.setVisible(!1),null!=this._disabledImage&&this._disabledImage.setVisible(!1))},setEnabled:function(a){this._isEnabled!=a&&(s.prototype.setEnabled.call(this,a),this._updateImagesVisibility())},unselected:function(){s.prototype.unselected.call(this);null!=this._normalImage&&(this._normalImage.setVisible(!0),null!=this._selectedImage&&this._selectedImage.setVisible(!1),null!=this._disabledImage&&this._disabledImage.setVisible(!1))},selected:function(){s.prototype.selected.call(this);
null!=this._normalImage&&(null!=this._disabledImage&&this._disabledImage.setVisible(!1),null!=this._selectedImage?(this._normalImage.setVisible(!1),this._selectedImage.setVisible(!0)):this._normalImage.setVisible(!0))},getOpacity:function(){return this._normalImage.getOpacity()},setOpacity:function(a){this._normalImage.setOpacity(a);null!=this._selectedImage&&this._selectedImage.setOpacity(a);null!=this._disabledImage&&this._disabledImage.setOpacity(a)},initWithNormalSprite:function(a,b,c,d,f){this.initWithCallback(d,
f);this.setNormalImage(a);this.setSelectedImage(b);this.setDisabledImage(c);null!=this._normalImage&&this.setContentSize(this._normalImage.getContentSize());return!0},setDisabledImage:function(a){this._disabledImage!=a&&(null!=a&&this.addChild(a,0,s.DISABLE_TAG),null!=this._disabledImage&&this.removeChild(this._disabledImage,!0),this._disabledImage=a,this._updateImagesVisibility())},setSelectedImage:function(a){this._selectedImage!=a&&(null!=a&&this.addChild(a,0,s.SELECTED_TAG),null!=this._selectedImage&&
this.removeChild(this._selectedImage,!0),this._selectedImage=a,this._updateImagesVisibility())},setNormalImage:function(a){this._normalImage!=a&&(null!=a&&this.addChild(a,0,s.NORMAL_TAG),null!=this._normalImage&&this.removeChild(this._normalImage,!0),this._normalImage=a,this.setContentSize(this._normalImage.getContentSize()),this._updateImagesVisibility())},__class__:va});Ua=function(){this._opacity=this._selectedIndex=0;s.call(this);this._subItems=[]};Ua.__name__=!0;Ua.create=function(a,b,c){var d=
new Ua;d.initWithItems(a,b,c);return d};Ua.__super__=s;Ua.prototype=j(s.prototype,{onEnter:function(){s.prototype.onEnter.call(this);this.setSelectedIndex(this._selectedIndex)},setEnabled:function(a){if(this._isEnabled==a&&(s.prototype.setEnabled.call(this,a),null!=this._subItems&&0<this._subItems.length))for(var b=0,c=this._subItems;b<c.length;){var d=c[b];++b;d.setEnabled(a)}},unselected:function(){s.prototype.unselected.call(this);this._subItems[this._selectedIndex].unselected()},selected:function(){s.prototype.selected.call(this);
this._subItems[this._selectedIndex].selected()},activate:function(){this._isEnabled&&this.setSelectedIndex((this._selectedIndex+1)%this._subItems.length);s.prototype.activate.call(this)},initWithItems:function(a,b,c){this.initWithCallback(b,c);for(b=0;b<a.length;)c=a[b],++b,null!=c&&this._subItems.push(c);this._selectedIndex=vc.UINT_MAX;this.setSelectedIndex(0);return!0},setSelectedIndex:function(a){if(a!=this._selectedIndex){this._selectedIndex=a;a=this.getChildByTag(s.CURRENT_ITEM);null!=a&&a.removeFromParent(!1);
a=this._subItems[this._selectedIndex];this.addChild(a,0,s.CURRENT_ITEM);var b=a.getContentSize();this.setContentSize(b);a.setPosition(b.width/2,b.height/2)}},setOpacity:function(a){this._opacity=a;if(null!=this._subItems&&0<this._subItems.length)for(var b=0,c=this._subItems;b<c.length;){var d=c[b];++b;d.setOpacity(a)}},getOpacity:function(){return this._opacity},__class__:Ua});Va=function(){};uc=void 0;vc=void 0;Ba=void 0;Ca=void 0;Hb=void 0;Da=void 0;La=void 0;Yb=void 0;Wa=void 0;Xa=void 0;Ma=void 0;
Ya=void 0;Va.__name__=!0;Va.assert=function(a,b){if(!a)throw b;};o=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};w=void 0;ta=void 0;xa=void 0;o.__name__=!0;o.prototype={set:function(a,b){this.x=a;this.y=b},__class__:o};uc=function(){};uc.__name__=!0;Ba=function(){this.rootDict=[]};Ba.__name__=!0;Ba.getInstance=function(){null==Ba.s_SharedFileUtils&&(Ba.s_SharedFileUtils=new Ba);return Ba.s_SharedFileUtils};Ba.prototype={dictionaryWithContentsOfFile:function(a){return this.rootDict=
Ca.getInstance().parse(a)},__class__:Ba};vc=function(){};vc.__name__=!0;Hb=function(a){null!=a&&(this.name=a.name,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.sourceColorX=a.sourceColorX,this.sourceColorY=a.sourceColorY,this.rotated=a.rotated)};Hb.__name__=!0;Hb.prototype={__class__:Hb};Ca=function(){this.plist=[]};Ca.__name__=!0;Ca.getInstance=function(){null==Ca._instance&&(Ca._instance=new Ca);return Ca._instance};Ca.prototype={parseString:function(a){for(var b=[],c=new rc,
d=0,f=a.length;d<f;){var h=d++;"{"!=a.charAt(h)&&"}"!=a.charAt(h)&&c.addSub(a.charAt(h),0,null)}a=c.b;f=0;for(d=a.split(",");f<d.length;)h=d[f],++f,b.push(B.parseFloat(h));return b},parse:function(a){this.xmlDoc=p.parse(jb.pack.getFile(a).toString());for(var a=0,b=this.xmlDoc.firstElement().firstElement().elements();b.hasNext();){var c=b.next();"frames"==c.firstChild().get_nodeValue()?a=1:"dict"==c.get_nodeName()&&1==a?this.frames=c:"metadata"==c.firstChild().get_nodeValue()?a=2:"dict"==c.get_nodeName()&&
2==a&&(this.metadata=c)}for(var a=1,b=new Hb,d="",f=this.frames.elements();f.hasNext();)if(c=f.next(),"key"==c.get_nodeName()&&1==a)b.name=c.firstChild().get_nodeValue(),a=2;else if("dict"==c.get_nodeName()&&2==a){a=1;for(c=c.elements();c.hasNext();){var h=c.next();if("key"==h.get_nodeName())d=h.firstChild().get_nodeValue();else switch(d){case "frame":h=this.parseString(h.firstChild().get_nodeValue());b.x=h[0];b.y=h[1];b.width=h[2];b.height=h[3];break;case "sourceColorRect":h=this.parseString(h.firstChild().get_nodeValue());
b.sourceColorX=h[0];b.sourceColorY=h[1];break;case "rotated":b.rotated="true"==h.get_nodeName()?!0:!1}}this.plist.push(new Hb(b))}return this.plist},__class__:Ca};Da=function(){};Da.__name__=!0;Da.white=function(){return new La(255,255,255)};Da.V3F_C4B_T2F_QuadZero=function(){return new Yb(new Wa(new Xa(0,0,0),new Ma(0,0,0,1),new Ya(0,0)),new Wa(new Xa(0,0,0),new Ma(0,0,0,1),new Ya(0,0)),new Wa(new Xa(0,0,0),new Ma(0,0,0,1),new Ya(0,0)),new Wa(new Xa(0,0,0),new Ma(0,0,0,1),new Ya(0,0)))};Da.convertColor3BtoHexString=
function(a){return"0x"+Jc.hex((a.r&255)<<16|(a.g&255)<<8|a.b&255)};La=function(a,b,c){this.r=a;this.g=b;this.b=c;this.color=B.parseInt(Da.convertColor3BtoHexString(this))};La.__name__=!0;La.white=function(){return new La(255,255,255)};La.prototype={__class__:La};Ma=function(a,b,c,d){this.r=a;this.g=b;this.b=c;this.a=d;this.color=B.parseInt(Da.convertColor3BtoHexString(new La(a,b,c)))};Ma.__name__=!0;Ma.prototype={__class__:Ma};Xa=function(a,b,c){this.x=a;this.y=b;this.z=c};Xa.__name__=!0;Xa.prototype=
{__class__:Xa};Ya=function(a,b){this.u=a;this.v=b};Ya.__name__=!0;Ya.prototype={__class__:Ya};Wa=function(a,b,c){this.vertices=a;this.colors=b;this.texCoords=c};Wa.__name__=!0;Wa.prototype={__class__:Wa};Yb=function(a,b,c,d){this.bl=a;this.br=b;this.tl=c;this.tr=d};Yb.__name__=!0;Yb.prototype={__class__:Yb};mb=function(){this._frames=[];this._restoreOriginalFrame=!0;this._totalDelayUnits=this._delayPerUnit=this._duration=this._loops=0};m=void 0;Xb=void 0;ra=void 0;za=void 0;ga=void 0;Aa=void 0;mb.__name__=
!0;mb.createWithAnimationFrames=function(a,b,c){var d=new mb;null==c&&d.initWithSpriteFrames(a,b);return d};mb.prototype={initWithSpriteFrames:function(a,b){this._loops=1;this._delayPerUnit=b;this.setFrames([]);if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c;var f=new Xb;f.initWithSpriteFrame(d,1,null);this._frames.push(f);this._totalDelayUnits++}return!0},getTotalDelayUnits:function(){return this._totalDelayUnits},getDelayPerUnit:function(){return this._delayPerUnit},getDuration:function(){return this._totalDelayUnits*
this._delayPerUnit},getRestoreOriginalFrame:function(){return this._restoreOriginalFrame},getLoops:function(){return this._loops},setFrames:function(a){this._frames=a},getFrames:function(){return this._frames},__class__:mb};Xb=function(){this._delayPerUnit=0};Xb.__name__=!0;Xb.prototype={setUserInfo:function(a){this._userInfo=a},setDelayUnits:function(a){this._delayPerUnit=a},getDelayUnits:function(){return this._delayPerUnit},setSpriteFrame:function(a){this._spriteFrame=a},getSpriteFrame:function(){return this._spriteFrame},
initWithSpriteFrame:function(a,b,c){this.setSpriteFrame(a);this.setDelayUnits(b);this.setUserInfo(c);return!0},__class__:Xb};ra=function(){};ra.__name__=!0;ra.getInstance=function(){null==ra.s_sharedAnimationCache&&(ra.s_sharedAnimationCache=new ra,ra.s_sharedAnimationCache.init());return ra.s_sharedAnimationCache};ra.prototype={init:function(){this._animations=new C.StringMap;return!0},getAnimation:function(a){return this._animations.exists(a)?this._animations.get(a):null},addAnimation:function(a,
b){this._animations.set(b,a)},__class__:ra};m=function(){this._opacity=255;D.call(this);this._color=La.white();this._offsetPosition=new o(0,0);this._unflippedOffsetPositionFromCenter=J.p(0,0);this._shouldBeHidden=!1};m.__name__=!0;m.createWithTexture=function(a,b){var c=new m;null==b?c.initWithTexture(a):c.initWithTexture(a,b);return c};m.create=function(a,b){var c=new m;null==b?(c.init(),c.initWithFile(a)):(c.init(),c.initWithFile(a,b));return c};m.__super__=D;m.prototype=j(D.prototype,{update:function(a){D.prototype.update.call(this,
a)},displayFrame:function(){return x.__instanceof(this.sprite,za)?x.__cast(this.sprite,za).getCurrentFrame():null},setDisplayFrame:function(a){x.__cast(this.sprite,za).updateFrame(a);this._rectRotated=a.isRotated();var b=a.getTexture();b!=this._texture&&this.setTexture(b);this.setTextureRect(a.getRect(),this._rectRotated,a.getOriginalSize())},setTexture:function(a){this._texture=a},setTextureRect:function(){},initWithSpriteFrameName:function(a){return this.initWithSpriteFrame(ga.getInstance().getSpriteFrame(a))},
initWithSpriteFrame:function(a){this._position.x=a.getOffset().x;this._position.y=a.getOffset().y;return this.initWithTexture(a.getTexture(),a.getRect(),a.isRotated())},initWithFile:function(a,b){var c=jb.pack.getTexture(a),d=fa.getInstance().addImage(a);null==b?(this.sprite=new ub(c),this._contentSize=new N(this.sprite.getNaturalWidth(),this.sprite.getNaturalHeight()),this.entity.add(this.sprite),this.component=new ya(this),this.entity.add(this.component)):this.initWithTexture(d,b)},initWithTexture:function(a,
b,c){null==c&&(c=!1);if(null==b)b=new w(0,0,0,0),b.width=a.getPixelsWide(),b.height=a.getPixelsHigh(),this.sprite=new ub(a.getTexture()),this._contentSize=new N(this.sprite.getNaturalWidth(),this.sprite.getNaturalHeight()),this.entity.add(this.sprite),this.component=new ya(this),this.entity.add(this.component);else{this.sprite=new za;var d=x.__cast(this.sprite,za),f=Aa.createWithTexture(a,b,c,this._position,new N);d.updateFrame(f);this.entity.add(d);this.component=new ya(this);this.entity.add(this.component);
this._contentSize=new N(b.width,b.height)}this.setTexture(a);this.setTextureRect(b,c,new N(b.width,b.height));return!0},init:function(){D.prototype.init.call(this);this._dirty=this._recursiveDirty=!1;this._opacityModifyRGB=!0;this._opacity=1;this._color=Da.white();this._colorUnmodified=Da.white();this._flipX=this._flipY=!1;this.setAnchorPoint(new o(0,0));this._offsetPosition=new o(0,0);this._hasChildren=!1;var a=new Ma(255,255,255,1);this._quad=Da.V3F_C4B_T2F_QuadZero();this._quad.bl.colors=a;this._quad.br.colors=
a;this._quad.tl.colors=a;this._quad.tr.colors=a;this.setTextureRect(J.rectZero(),!1,J.sizeZero());return!0},setOpacity:function(a){this._opacity=a;this.sprite.alpha.set__(a/255)},getOpacity:function(){return this._opacity},setBlendFunc:function(a){this._blendFunc=a;this.sprite.blendMode=a},__class__:m});Aa=function(){this._offset=new o(0,0);this._offsetInPixels=new o(0,0);this._originalSize=new N(0,0);this._rectInPixels=new w(0,0,0,0);this._rect=new w(0,0,0,0);this._originalSizeInPixels=new N(0,0);
this._textureFilname=""};Aa.__name__=!0;Aa.createWithTexture=function(a,b,c,d,f){var h=new Aa;h.initWithTexture(a,b,c,d,f);return h};Aa.prototype={initWithTexture:function(a,b,c,d,f){this._texture=a;this._rect=this._rectInPixels=b;this._offset=this._offsetInPixels=d;this._originalSize=this._originalSizeInPixels=f;this._rotated=c;return!0},getOffset:function(){return new o(this._offset.x,this._offset.y)},getTexture:function(){return null!=this._texture?this._texture:null},getOriginalSize:function(){return new N(this._originalSize.width,
this._originalSize.height)},getRect:function(){return this._rect},isRotated:function(){return this._rotated},__class__:Aa};ga=function(){this._spriteFrames=new C.StringMap};ga.__name__=!0;ga.getInstance=function(){null==ga.s_sharedSpriteFrameCache&&(ga.s_sharedSpriteFrameCache=new ga);return ga.s_sharedSpriteFrameCache};ga.prototype={getSpriteFrame:function(a){return this._spriteFrames.exists(a)?this._spriteFrames.get(a):null},addSpriteFrames:function(a,b){var c=Ba.getInstance().dictionaryWithContentsOfFile(a),
d=new Vb;if(null==b){var f=a.split(".pli")[0];d.setTexture(jb.pack.getTexture(f))}this._addSpriteFramesWithDictionary(c,d)},_addSpriteFramesWithDictionary:function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;var f=new w(d.x,d.y,d.width,d.height),h=d.rotated,e=new o(d.sourceColorX,d.sourceColorY),i=new N(0,0),f=Aa.createWithTexture(b,f,h,e,i);this._spriteFrames.set(d.name,f)}},__class__:ga};v=function(){this.blendMode=this.scissor=null;var a=this;this._flags=75;this._localMatrix=new ta;var b=function(){a._flags|=
12};this.x=new T(0,b);this.y=new T(0,b);this.rotation=new T(0,b);this.scaleX=new T(1,b);this.scaleY=new T(1,b);this.anchorX=new T(0,b);this.anchorY=new T(0,b);this.alpha=new T(1)};R=void 0;gb=void 0;tb=void 0;ub=void 0;L=void 0;Rb=void 0;pa=void 0;Sa=void 0;kc=void 0;Fa=void 0;vb=void 0;v.__name__=!0;v.hitTest=function(a,b,c){var d=a._compMap.Sprite_4;if(null!=d){if(3!=(d._flags&3))return null;d.getLocalMatrix().inverseTransform(b,c,v._scratchPoint)&&(b=v._scratchPoint.x,c=v._scratchPoint.y);var f=
d.scissor;if(null!=f&&!f.contains(b,c))return null}a=v.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};v.render=function(a,b){var c=a._compMap.Sprite_4;if(null!=c){var d=c.alpha._value;if(0==(c._flags&1)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),f=d.m02,h=d.m12;0!=(c._flags&64)&&(f=Math.round(f),h=Math.round(h));b.transform(d.m00,d.m10,d.m01,d.m11,f,h);d=c.scissor;null!=d&&b.applyScissor(d.x,
d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_5;if(null!=d){d=d.occludedScenes;for(f=0;f<d.length;)h=d[f],++f,v.render(h,b)}for(d=a.firstChild;null!=d;)f=d.next,v.render(d,b),d=f;null!=c&&b.restore()};v.hitTestBackwards=function(a,b,c){if(null!=a){var d=v.hitTestBackwards(a.next,b,c);return null!=d?d:v.hitTest(a,b,c)}return null};v.__super__=W;v.prototype=j(W.prototype,{set_visible:function(a){this._flags=zc.set(this._flags,1,a);return a},draw:function(){},onUpdate:function(a){this.x.update(a);
this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);
return this},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return"Sprite_4"},
__class__:v});za=function(){v.call(this);this._actionManager=t.getInstance().getActionManager()};za.__name__=!0;za.__super__=v;za.prototype=j(v.prototype,{getNaturalWidth:function(){return this.frame.getRect().width},getNaturalHeight:function(){return this.frame.getRect().height},onUpdate:function(a){v.prototype.onUpdate.call(this,a)},getCurrentFrame:function(){return this.frame},draw:function(a){this.g=a;this.frame.isRotated()?(a.translate(this.frame.getOffset().x,this.frame.getOffset().y+this.frame.getRect().height),
a.rotate(-90),a.drawSubImage(this.frame.getTexture().getTexture(),0,0,this.frame.getRect().x,this.frame.getRect().y,this.frame.getRect().height,this.frame.getRect().width)):(a.translate(this.frame.getOffset().x,this.frame.getOffset().y),a.drawSubImage(this.frame.getTexture().getTexture(),0,0,this.frame.getRect().x,this.frame.getRect().y,this.frame.getRect().width,this.frame.getRect().height))},updateFrame:function(a){this.frame=a},__class__:za});Gb=function(){};Gb.__name__=!0;Gb.pAdd=function(a,b){return new o(a.x+
b.x,a.y+b.y)};Gb.pSub=function(a,b){return new o(a.x-b.x,a.y-b.y)};Vb=function(){};fa=void 0;Vb.__name__=!0;Vb.prototype={getPixelsHigh:function(){return this._texture.get_height()},getPixelsWide:function(){return this._texture.get_width()},setTexture:function(a){this._texture=a},getTexture:function(){return this._texture},__class__:Vb};fa=function(){};fa.__name__=!0;fa.getInstance=function(){null==fa.g_sharedTextureCache&&(fa.g_sharedTextureCache=new fa);return fa.g_sharedTextureCache};fa.prototype=
{addImage:function(a){var b=jb.pack,c=new Vb;c.setTexture(b.getTexture(a));return c},__class__:fa};Zb=function(a,b,c){null==c&&(c=0);this._point=new o(a,b);this._prevPoint=new o(0,0);this._id=c};Zb.__name__=!0;Zb.prototype={_setPrevPoint:function(a,b){this._prevPoint=new o(a,b)},getLocation:function(){return this._point},__class__:Zb};I=function(){this._dispatchEvents=!0;this._pointerPressed=!1;this._pointerDelegateHandlers=[];I._registerPointerEvent()};I.__name__=!0;I.getPointerByEvent=function(a){var b=
a.viewX,a=a.viewY,c=new Zb(b,a);c._setPrevPoint(I._prePoint.x,I._prePoint.y);I._prePoint.x=b;I._prePoint.y=a;return c};I._registerPointerEvent=function(){u._platform.getPointer().down.connect(function(a){t.getInstance().getPointerDispatcher()._setPointerPressed(!0);t.getInstance().getPointerDispatcher().pointerHandle(I.getPointerByEvent(a),a,I.POINTER_DOWN)});u._platform.getPointer().up.connect(function(a){t.getInstance().getPointerDispatcher()._setPointerPressed(!1);t.getInstance().getPointerDispatcher().pointerHandle(I.getPointerByEvent(a),
a,I.POINTER_UP)});u._platform.getPointer().move.connect(function(a){t.getInstance().getPointerDispatcher().pointerHandle(I.getPointerByEvent(a),a,I.POINTER_MOVED)})};I.prototype={pointerHandle:function(a,b,c){for(var b=0,d=this._pointerDelegateHandlers;b<d.length;){var f=d[b];++b;switch(c){case 0:f.getDelegate().onPointerDown(a);break;case 3:f.getDelegate().onPointerUp(a);break;case 1:if(this._pointerPressed)f.getDelegate().onPointerDragged(a);else f.getDelegate().onPointerMoved(a)}}},removePointerDelegate:function(a){if(null!=
a)for(var b=0,c=this._pointerDelegateHandlers.length;b<c;){var d=this._pointerDelegateHandlers[b++];if(null!=d&&d.getDelegate()==a){Ja.ArrayRemoveObject_cc_touchdispatcher_CCPointerHandler(this._pointerDelegateHandlers,d);break}}},forceAddHandler:function(a,b){for(var c=0,d=0,f=b.length;d<f;){var h=d++,h=b[h];null!=h&&h.getPriority()<a.getPriority()&&++c;if(h.getDelegate()==a.getDelegate())return b}return Ja.ArrayAppendObjectToIndex_cc_touchdispatcher_CCPointerHandler(b,a,c)},addPointerDelegate:function(a,
b){this._pointerDelegateHandlers=this.forceAddHandler(nb.create(a,b),this._pointerDelegateHandlers)},_setPointerPressed:function(a){this._pointerPressed=a},__class__:I};nb=function(){this._priority=0};nb.__name__=!0;nb.create=function(a,b){var c=new nb;c.initWithDelegate(a,b);return c};nb.prototype={initWithDelegate:function(a,b){this._delegate=a;this._priority=b},getPriority:function(){return this._priority},getDelegate:function(){return this._delegate},__class__:nb};zb=function(){this.isZOrderChanged=
!1;this.zOrder=0;this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};zb.__name__=!0;zb.__interfaces__=[Ha];zb.prototype={dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=
d;c.parent=null;c.next=null;break}b=c;c=d}},addChild:function(a,b,c){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var b=null,d=this.firstChild;null!=d;)b=d,d=d.next;if(null!=b)if(null==c&&(c=a.isZOrderChanged?a.zOrder:b.zOrder),b.zOrder<=c)b.next=a;else{b=this.firstChild;for(d=null;null!=b;)if(b.zOrder>c){null!=d?(d.next=a,a.next=b):(a.next=this.firstChild,this.firstChild=a);break}else d=b,b=b.next}else this.firstChild=a,null==c&&(c=this.zOrder)}else c=null==this.firstChild?
0:this.firstChild.zOrder-1,a.next=this.firstChild,this.firstChild=a;a.zOrder=c;return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=d:b.init(this,d),delete this._compMap[c.get_name()],c.onRemoved(),c.init(null,null),!0;b=c;c=d}return!1},add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;
null!=b?b.next=a:this.firstComponent=a;a.init(this,null);a.onAdded();return this},__class__:zb};yc=function(){};e=void 0;Q=void 0;fb=void 0;Kb=void 0;Lb=void 0;F=void 0;Ra=void 0;Mb=void 0;ja=void 0;qb=void 0;ea=void 0;gc=void 0;Nb=void 0;rb=void 0;hc=void 0;sb=void 0;Ob=void 0;Pb=void 0;y=void 0;yc.__name__=!0;yc.prototype={__class__:yc};e={HtmlPlatform:function(){}};e.HtmlPlatform.__name__=!0;e.HtmlPlatform.__interfaces__=[yc];e.HtmlPlatform.prototype={createRenderer:function(a){try{var b=pc._CanvasElement.CanvasUtil.getContextWebGL(a,
{alpha:!1,depth:!1});if(null!=b)if(e.HtmlUtil.detectSlowDriver(b))null;else return new e.WebGLRenderer(this._stage,b)}catch(c){}return new e.CanvasRenderer(a)},getY:function(a,b){return this._stage.scaleFactor*(a.clientY-b.top)},getX:function(a,b){return this._stage.scaleFactor*(a.clientX-b.left)},getRenderer:function(){return this._renderer},getPointer:function(){return this._pointer},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;u.hidden._value||(this._skipFrame?this._skipFrame=
!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getStage:function(){return this._stage},loadAssetPack:function(a){return(new e.HtmlAssetPackLoader(this,a)).promise},init:function(){var a=this;e.HtmlUtil.fixAndroidMath();var b=null;try{b=n.window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.setAttribute("moz-opaque","true");this._stage=new e.HtmlStage(b);this._pointer=new Q;this._mouse=new e.HtmlMouse(this._pointer,b);this._renderer=this.createRenderer(b);
this.mainLoop=new fb;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,f=function(c){if(!(1E3>c.timeStamp-d)){var f=b.getBoundingClientRect(),h=a.getX(c,f),f=a.getY(c,f);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(h,f,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(h,f);break;case "mouseup":a._mouse.submitUp(h,f,
c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(h,f,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};n.window.addEventListener("mousedown",f,!1);n.window.addEventListener("mousemove",f,!1);n.window.addEventListener("mouseup",f,!1);b.addEventListener("mousewheel",f,!1);b.addEventListener("DOMMouseScroll",f,!1);var h="undefined"!=typeof n.window.ontouchstart,f="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(h||f){var Ec=
new Kb(this._pointer,h?4:n.navigator.msMaxTouchPoints);this._touch=Ec;f=function(b){var c=h?b.changedTouches:[b],f=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":b.preventDefault();e.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&e.HtmlUtil.hideMobileBrowser();for(b=0;b<c.length;){var i=c[b];++b;var l=a.getX(i,f),g=a.getY(i,f),i=(h?i.identifier:i.pointerId)|0;Ec.submitDown(i,l,g)}break;case "touchmove":case "MSPointerMove":b.preventDefault();for(b=0;b<c.length;)i=
c[b],++b,l=a.getX(i,f),g=a.getY(i,f),i=(h?i.identifier:i.pointerId)|0,Ec.submitMove(i,l,g);break;case "touchend":case "touchcancel":case "MSPointerUp":for(b=0;b<c.length;)i=c[b],++b,l=a.getX(i,f),g=a.getY(i,f),i=(h?i.identifier:i.pointerId)|0,Ec.submitUp(i,l,g)}};h?(b.addEventListener("touchstart",f,!1),b.addEventListener("touchmove",f,!1),b.addEventListener("touchend",f,!1),b.addEventListener("touchcancel",f,!1)):(b.addEventListener("MSPointerDown",f,!1),b.addEventListener("MSPointerMove",f,!1),
b.addEventListener("MSPointerUp",f,!1))}else this._touch=new Lb;var i=n.window.onerror;n.window.onerror=function(a,b,c){u.uncaughtError.emit1(a);return null!=i?i(a,b,c):!1};var g=e.HtmlUtil.loadExtension("hidden",n.document);null!=g.value?(f=function(){u.hidden.set__(qc.field(n.document,g.field))},f(null),n.document.addEventListener(g.prefix+"visibilitychange",f,!1)):(f=function(a){u.hidden.set__("pagehide"==a.type)},n.window.addEventListener("pageshow",f,!1),n.window.addEventListener("pagehide",
f,!1));u.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var j=e.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=j){var l=n.window.performance,m=null!=l&&e.HtmlUtil.polyfill("now",l);m?this._lastUpdate=l.now():null;var k=null,k=function(c){a.update(m?l.now():c);j(k,b)};j(k,b)}else n.window.setInterval(function(){a.update(Date.now())},16);null},__class__:e.HtmlPlatform};qa=function(a,b){this._value=a;null!=b&&(this._changed=
new xb(b))};qa.__name__=!0;qa.prototype={get_changed:function(){null==this._changed&&(this._changed=new xb);return this._changed},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit2(a,b));return a},watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},__class__:qa};hb=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};hb.__name__=!0;hb.__interfaces__=[Ha];hb.prototype={dispose:function(){null!=
this._signal&&(this._signal.disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:hb};U=function(a){this._head=null!=a?new hb(this,a):null;this._deferredTasks=null};U.__name__=!0;U.prototype={listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=
a}},didEmit:function(a){for(this._head=a;null!=this._deferredTasks;)this._deferredTasks.fn(),this._deferredTasks=this._deferredTasks.next},willEmit:function(){var a=this._head;this._head=U.DISPATCHING_SENTINEL;return a},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new oc.Task(a);null!=b?b.next=a:this._deferredTasks=a},emit2:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},emit1:function(a){for(var b=
this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},emit0:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},disconnect:function(a){var b=this;this._head==U.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},connectImpl:function(a,b){var c=this,d=new hb(this,a);this._head==U.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},
__class__:U};xb=function(a){U.call(this,a)};xb.__name__=!0;xb.__super__=U;xb.prototype=j(U.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:xb});M=function(a){U.call(this,a)};M.__name__=!0;M.__super__=U;M.prototype=j(U.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:M});T=function(a,b){qa.call(this,a,b)};Qb=void 0;ic=void 0;jc=void 0;T.__name__=!0;T.__super__=qa;T.prototype=j(qa.prototype,{set_behavior:function(a){this._behavior=
a;this.update(0);return a},animateBy:function(a,b,c){this.set_behavior(new Qb(this._value,this._value+a,b,c))},update:function(a){null!=this._behavior&&(qa.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},set__:function(a){this._behavior=null;return qa.prototype.set__.call(this,a)},__class__:T});u=function(){};u.__name__=!0;u.init=function(){u._calledInit||(u._platform.init(),u._calledInit=!0)};Cc=function(){this._realDt=0};Cc.__name__=!0;Cc.__super__=
W;Cc.prototype=j(W.prototype,{onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},get_name:function(){return"SpeedAdjuster_6"},__class__:Cc});ic=function(){};ic.__name__=!0;ic.prototype={__class__:ic};jc=function(){};jc.__name__=!0;jc.linear=function(a){return a};Qb=function(a,b,c,d){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=d?d:jc.linear};Qb.__name__=!0;Qb.__interfaces__=[ic];Qb.prototype={isComplete:function(){return this.elapsed>=
this._duration},update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},__class__:Qb};eb=function(){};g=void 0;fc=void 0;Ib=void 0;Jb=void 0;ia=void 0;eb.__name__=!0;eb.__interfaces__=[Ha];eb.prototype={__class__:eb};g={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),WEBP:["WEBP",0]};g.WEBP.toString=A;g.WEBP.__enum__=g;g.JXR=["JXR",1];g.JXR.toString=
A;g.JXR.__enum__=g;g.PNG=["PNG",2];g.PNG.toString=A;g.PNG.__enum__=g;g.JPG=["JPG",3];g.JPG.toString=A;g.JPG.__enum__=g;g.GIF=["GIF",4];g.GIF.toString=A;g.GIF.__enum__=g;g.DDS=["DDS",5];g.DDS.toString=A;g.DDS.__enum__=g;g.PVR=["PVR",6];g.PVR.toString=A;g.PVR.__enum__=g;g.PKM=["PKM",7];g.PKM.toString=A;g.PKM.__enum__=g;g.MP3=["MP3",8];g.MP3.toString=A;g.MP3.__enum__=g;g.M4A=["M4A",9];g.M4A.toString=A;g.M4A.__enum__=g;g.OPUS=["OPUS",10];g.OPUS.toString=A;g.OPUS.__enum__=g;g.OGG=["OGG",11];g.OGG.toString=
A;g.OGG.__enum__=g;g.WAV=["WAV",12];g.WAV.toString=A;g.WAV.__enum__=g;g.Data=["Data",13];g.Data.toString=A;g.Data.__enum__=g;fc=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};fc.__name__=!0;fc.prototype={__class__:fc};Ib=function(){};Ib.__name__=!0;Ib.__interfaces__=[Ha];Ib.prototype={__class__:Ib};Jb=function(){};Jb.__name__=!0;Jb.__interfaces__=[eb];Jb.prototype={__class__:Jb};x=void 0;pc=void 0;n=void 0;n=function(){};n.__name__=!0;ia=function(){this._entries=[]};ia.__name__=
!0;ia.build=function(a,b){null==b&&(b=!0);var c=qc.field(Ac.Meta.getType(ia).assets[0],a);if(null==c){if(b)throw V.withFields("Missing asset pack",["name",a]);return null}var d=new ia;d.set_relativeBasePath("assets");for(var f=0;f<c.length;){var h=c[f];++f;var e=h.name,i=a+"/"+e+"?v="+B.string(h.md5),j=ia.inferFormat(e);j!=g.Data&&(e=V.removeFileExtension(e));d.add(e,i,h.bytes,j)}return d};ia.inferFormat=function(a){a=V.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return g.GIF;
case "jpg":case "jpeg":return g.JPG;case "jxr":case "wdp":return g.JXR;case "png":return g.PNG;case "webp":return g.WEBP;case "dds":return g.DDS;case "pvr":return g.PVR;case "pkm":return g.PKM;case "m4a":return g.M4A;case "mp3":return g.MP3;case "ogg":return g.OGG;case "opus":return g.OPUS;case "wav":return g.WAV}else null;return g.Data};ia.prototype={get_externalBasePath:function(){return this._externalBasePath},set_relativeBasePath:function(a){this._relativeBasePath=a;null!=a&&null;return a},get_relativeBasePath:function(){return this._relativeBasePath},
getFullURL:function(a){var b=null!=this.get_externalBasePath()&&ia._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),c=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();a.format==g.Data&&(c=b);return null!=c?V.joinPath(c,a.url):a.url},iterator:function(){return q.iter(this._entries)},add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=ia.inferFormat(b));a=new fc(a,b,d,c);this._entries.push(a);return a},__class__:ia};L={__ename__:!0,__constructs__:["Normal",
"Add","Mask","Copy"],Normal:["Normal",0]};L.Normal.toString=A;L.Normal.__enum__=L;L.Add=["Add",1];L.Add.toString=A;L.Add.__enum__=L;L.Mask=["Mask",2];L.Mask.toString=A;L.Mask.__enum__=L;L.Copy=["Copy",3];L.Copy.toString=A;L.Copy.__enum__=L;Rb=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};Rb.__name__=!0;Rb.prototype={setKerning:function(a,b){null==this._kernings&&(this._kernings=new C.IntMap);this._kernings.set(a,
b)},getKerning:function(a){return null!=this._kernings?this._kernings.get(a)|0:0},draw:function(a,b,c){0<this.width&&a.drawSubImage(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},__class__:Rb};gb=function(a,b){this.name=b;this._pack=a;this.reload()};gb.__name__=!0;gb.prototype={reload:function(){this._glyphs=new C.IntMap;this._glyphs.set(gb.NEWLINE.charCode,gb.NEWLINE);for(var a=new pa.ConfigParser(this._pack.getFile(this.name+".fnt").toString()),b=new C.IntMap,c=this.name.lastIndexOf("/"),
c=0<=c?q.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var f=a.pairs();f.hasNext();){var h=f.next();switch(h.key){case "size":this.size=h.getInt()}}break;case "page":for(var f=0,e=null,i=a.pairs();i.hasNext();)switch(h=i.next(),h.key){case "id":f=h.getInt();break;case "file":e=h.getString()}b.set(f,this._pack.getTexture(c+V.removeFileExtension(e)));break;case "char":f=null;for(e=a.pairs();e.hasNext();)switch(h=e.next(),h.key){case "id":f=new Rb(h.getInt());
break;case "x":f.x=h.getInt();break;case "y":f.y=h.getInt();break;case "width":f.width=h.getInt();break;case "height":f.height=h.getInt();break;case "page":f.page=b.get(h.getInt());break;case "xoffset":f.xOffset=h.getInt();break;case "yoffset":f.yOffset=h.getInt();break;case "xadvance":f.xAdvance=h.getInt()}this._glyphs.set(f.charCode,f);break;case "kerning":f=null;e=-1;for(i=a.pairs();i.hasNext();)switch(h=i.next(),h.key){case "first":f=this._glyphs.get(h.getInt());break;case "second":e=h.getInt();
break;case "amount":f.setKerning(e,h.getInt())}}},layoutText:function(a,b,c){null==c&&(c=0);null==b&&(b=R.Left);return new Sa(this,a,b,c)},__class__:gb};R={__ename__:!0,__constructs__:["Left","Center","Right"],Left:["Left",0]};R.Left.toString=A;R.Left.__enum__=R;R.Center=["Center",1];R.Center.toString=A;R.Center.__enum__=R;R.Right=["Right",2];R.Right.toString=A;R.Right.__enum__=R;Sa=function(a,b,c,d){this.lines=0;var f=this;this._font=a;this._glyphs=[];this._offsets=[];this.bounds=new w;for(var h=
[],e=b.length,i=0;i<e;){var g=i++,j=b.charCodeAt(g),j=a._glyphs.get(j);null!=j?this._glyphs.push(j):null}for(var b=-1,l=0,m=0,e=a._glyphs.get(10),i=function(){f.bounds.width=xa.max(f.bounds.width,l);f.bounds.height+=m;h[f.lines]=l;m=l=0;++f.lines},g=0;g<this._glyphs.length;){j=this._glyphs[g];this._offsets[g]=l;var k=0<d&&l+j.width>d;k||j==e?(k&&(0<=b?(this._glyphs[b]=e,l=this._offsets[b],g=b):this._glyphs.splice(g,0,e)),b=-1,m=a.size,i()):(32==j.charCode&&(b=g),l+=j.xAdvance,m=xa.max(m,j.height+
j.yOffset),g+1<this._glyphs.length&&(l+=j.getKerning(this._glyphs[g+1].charCode)));++g}i();for(var g=0,b=Sa.getAlignOffset(c,h[0],d),e=1.79769313486231E308,i=-1.79769313486231E308,n=k=0,p=this._glyphs.length;n<p;){j=this._glyphs[n];10==j.charCode&&(g+=a.size,++k,b=Sa.getAlignOffset(c,h[k],d));this._offsets[n]+=b;var o=g+j.yOffset,e=e<o?e:o,i=xa.max(i,o+j.height);++n}this.bounds.x=Sa.getAlignOffset(c,this.bounds.width,d);this.bounds.y=e;this.bounds.height=i-e};Sa.__name__=!0;Sa.getAlignOffset=function(a,
b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return(c-b)/2}};Sa.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var f=this._glyphs[c];10==f.charCode?b+=this._font.size:f.draw(a,this._offsets[c],b);++c}},__class__:Sa};pa={ConfigParser:function(a){this._configText=a;this._keywordPattern=new ib("([a-z]+)(.*)","");this._pairPattern=new ib('([a-z]+)=("[^"]*"|[^\\s]+)',"")}};pa.ConfigParser.__name__=!0;pa.ConfigParser.advance=function(a,b){var c=b.matchedPos();return q.substr(a,
c.pos+c.len,a.length)};pa.ConfigParser.prototype={pairs:function(){var a=this,b=this._pairText;return{next:function(){b=pa.ConfigParser.advance(b,a._pairPattern);return new pa.ConfigPair(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},keywords:function(){var a=this,b=this._configText;return{next:function(){b=pa.ConfigParser.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},
__class__:pa.ConfigParser};pa.ConfigPair=function(a,b){this.key=a;this._value=b};pa.ConfigPair.__name__=!0;pa.ConfigPair.prototype={getString:function(){return 34!=this._value.charCodeAt(0)?null:q.substr(this._value,1,this._value.length-2)},getInt:function(){return B.parseInt(this._value)},__class__:pa.ConfigPair};kc=function(){};kc.__name__=!0;kc.prototype={__class__:kc};ub=function(a){v.call(this);this.texture=a};ub.__name__=!0;ub.__super__=v;ub.prototype=j(v.prototype,{getNaturalHeight:function(){return this.texture.get_height()},
getNaturalWidth:function(){return this.texture.get_width()},draw:function(a){a.drawImage(this.texture,0,0)},__class__:ub});Fa={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};Fa.Portrait.toString=A;Fa.Portrait.__enum__=Fa;Fa.Landscape=["Landscape",1];Fa.Landscape.toString=A;Fa.Landscape.__enum__=Fa;tb=function(a,b){null==b&&(b="");this._layout=null;var c=this;v.call(this);this._font=a;this._text=b;this._align=R.Left;this._flags|=32;this.wrapWidth=new T(0,function(){c._flags|=
32})};tb.__name__=!0;tb.__super__=v;tb.prototype=j(v.prototype,{onUpdate:function(a){v.prototype.onUpdate.call(this,a);this.wrapWidth.update(a)},updateLayout:function(){0!=(this._flags&32)&&(this._flags&=-33,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value))},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=32);return a},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=32);return a},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,
b)},getNaturalHeight:function(){this.updateLayout();return this._layout.lines*this._font.size},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},draw:function(a){this.updateLayout();this._layout.draw(a,this._align)},__class__:tb});vb=function(){};vb.__name__=!0;vb.__interfaces__=[eb];vb.prototype={__class__:vb};P={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"]};oa=void 0;cc=void 0;pb=void 0;dc=void 0;ec=
void 0;P.Left=["Left",0];P.Left.toString=A;P.Left.__enum__=P;P.Middle=["Middle",1];P.Middle.toString=A;P.Middle.__enum__=P;P.Right=["Right",2];P.Right.toString=A;P.Right.__enum__=P;P.Unknown=function(a){a=["Unknown",3,a];a.__enum__=P;a.toString=A;return a};oa={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};oa.Default.toString=A;oa.Default.__enum__=oa;oa.Button=["Button",1];oa.Button.toString=A;oa.Button.__enum__=oa;oa.None=["None",2];oa.None.toString=A;oa.None.__enum__=
oa;cc=function(){this.init(0,0,0,null)};cc.__name__=!0;cc.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:cc};pb={__ename__:!0,__constructs__:["Mouse","Touch"]};pb.Mouse=function(a){a=["Mouse",0,a];a.__enum__=pb;a.toString=A;return a};pb.Touch=function(a){a=["Touch",1,a];a.__enum__=pb;a.toString=A;return a};dc=function(){this.init(0,0,0,null,null)};dc.__name__=!0;dc.prototype={init:function(a,b,c,d,f){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=
f;this._stopped=!1},__class__:dc};ec=function(a){this.id=a;this._source=pb.Touch(this)};ec.__name__=!0;ec.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:ec};xa=function(){};xa.__name__=!0;xa.max=function(a,b){return a>b?a:b};xa.min=function(a,b){return a<b?a:b};ta=function(){this.identity()};ta.__name__=!0;ta.multiply=function(a,b,c){null==c&&(c=new ta);var d=a.m00*b.m00+a.m01*b.m10,f=a.m00*b.m01+a.m01*b.m11,h=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=f;c.m02=h;d=a.m10*b.m00+
a.m11*b.m10;f=a.m10*b.m01+a.m11*b.m11;h=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=f;c.m12=h;return c};ta.prototype={clone:function(a){null==a&&(a=new ta);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},transformArray:function(a,b,c){for(var d=
0;d<b;){var f=a[d],h=a[d+1];c[d++]=f*this.m00+h*this.m01+this.m02;c[d++]=f*this.m10+h*this.m11+this.m12}},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},compose:function(a,b,c,d,f){var h=Math.sin(f),f=Math.cos(f);this.set(f*c,h*c,-h*d,f*d,a,b)},identity:function(){this.set(1,
0,0,1,0,0)},set:function(a,b,c,d,f,h){this.m00=a;this.m01=c;this.m02=f;this.m10=b;this.m11=d;this.m12=h},__class__:ta};w=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};w.__name__=!0;w.prototype={equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},clone:function(a){null==a&&(a=new w);a.set(this.x,this.y,this.width,this.height);return a},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<
a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},__class__:w};F=function(){this._disposed=!1};F.__name__=!0;F.__interfaces__=[eb];F.prototype={onDisposed:function(){null},dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},__class__:F};Ra=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new Tb;this._bytesLoaded=
new C.StringMap;this._pack=new Mb.BasicAssetPack(b,this);var d=Bc.array(b);if(0==d.length)this.handleSuccess();else{for(var f=new C.StringMap,h=0;h<d.length;){var e=d[h];++h;var i=f.get(e.name);null==i&&(i=[],f.set(e.name,i));i.push(e)}this._assetsRemaining=Bc.count(f);for(d=function(){return function(a){return function(){return function(){return a.iterator()}}()}}()(f)();d.hasNext();)i=d.next(),i=[i],this.pickBestEntry(i[0],function(a){return function(d){if(null!=d){var f=b.getFullURL(d);try{c.loadEntry(f,
d)}catch(h){c.handleError(d,"Unexpected error: "+B.string(h))}f=c.promise;f.set_total(f._total+d.bytes)}else d=a[0][0],Ra.isAudio(d.format)?c.handleLoad(d,ja.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(i))}};Ra.__name__=!0;Ra.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};Ra.prototype={handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(a,
b){this.promise.error.emit1(V.withFields(b,["url",a.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=function(a){return function(){return a.iterator()}}(this._bytesLoaded)();d.hasNext();)var f=d.next(),c=c+f;this.promise.set_progress(c)},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;
break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},getAssetFormats:function(){null},loadEntry:function(){null},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var f=c[d];++d;for(var h=0;h<a.length;){var e=a[h];++h;if(e.format==f){b(e);return}}}b(null)})},onDisposed:function(){},__class__:Ra};Mb={BasicAssetPack:function(a,b){this.disposed=
!1;this._manifest=a;this.loader=b;this.textures=new C.StringMap;this.sounds=new C.StringMap;this.files=new C.StringMap}};Mb.BasicAssetPack.__name__=!0;Mb.BasicAssetPack.__interfaces__=[Ib];Mb.BasicAssetPack.prototype={dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=function(a){return function(){return a.iterator()}}(this.textures)();a.hasNext();)a.next().dispose();this.textures=null;for(a=function(a){return function(){return a.iterator()}}(this.sounds)();a.hasNext();)a.next().dispose();
this.sounds=null;for(a=function(a){return function(){return a.iterator()}}(this.files)();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw V.withFields("Missing file",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw V.withFields("Missing sound",["name",a]);return c},getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==
c&&b)throw V.withFields("Missing texture",["name",a]);return c},__class__:Mb.BasicAssetPack};qb=function(a){F.call(this);this._content=a};qb.__name__=!0;qb.__interfaces__=[Jb];qb.__super__=F;qb.prototype=j(F.prototype,{onDisposed:function(){this._content=null},toString:function(){return this._content},__class__:qb});Fc=function(){};ac=void 0;xc=void 0;bc=void 0;Fc.__name__=!0;ea=function(a){this._pointer=a;this._source=pb.Mouse(ea._sharedEvent);this.down=new M;this.move=new M;this.up=new M;this.scroll=
new M;this._y=this._x=0;this._cursor=oa.Default;this._buttonStates=new C.IntMap};ea.__name__=!0;ea.__interfaces__=[Fc];ea.prototype={prepare:function(a,b,c){this._x=a;this._y=b;ea._sharedEvent.init(ea._sharedEvent.id+1,a,b,c)},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit1(c);return!0},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,gc.toButton(c)),this._pointer.submitUp(a,b,this._source),
this.up.emit1(ea._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit1(ea._sharedEvent)},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,gc.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit1(ea._sharedEvent))},__class__:ea};ac=function(){};ac.__name__=!0;ac.prototype={__class__:ac};Q=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=
new M;this.move=new M;this.up=new M;this._x=a;this._y=b;this._isDown=c};Q.__name__=!0;Q.__interfaces__=[ac];Q.prototype={prepare:function(a,b,c,d){this._x=a;this._y=b;Q._sharedEvent.init(Q._sharedEvent.id+1,a,b,c,d)},submitUp:function(a,b,c){if(this._isDown){this._isDown=!1;var d=[],f=v.hitTest(u.root,a,b);if(null!=f){var h=f.owner;do{var e=h._compMap.Sprite_4;null!=e&&d.push(e);h=h.parent}while(null!=h)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(e=d[a],++a,e=e._pointerUp,null!=e&&(e.emit1(Q._sharedEvent),
Q._sharedEvent._stopped))return;this.up.emit1(Q._sharedEvent)}},submitMove:function(a,b,c){var d=[],f=v.hitTest(u.root,a,b);if(null!=f){var h=f.owner;do{var e=h._compMap.Sprite_4;null!=e&&d.push(e);h=h.parent}while(null!=h)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(e=d[a],++a,e=e._pointerMove,null!=e&&(e.emit1(Q._sharedEvent),Q._sharedEvent._stopped))return;this.move.emit1(Q._sharedEvent)},submitDown:function(a,b,c){if(!this._isDown){this._isDown=!0;var d=[],f=v.hitTest(u.root,a,b);if(null!=f){var e=
f.owner;do{var g=e._compMap.Sprite_4;null!=g&&d.push(g);e=e.parent}while(null!=e)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(g=d[a],++a,g=g._pointerDown,null!=g&&(g.emit1(Q._sharedEvent),Q._sharedEvent._stopped))return;this.down.emit1(Q._sharedEvent)}},__class__:Q};xc=function(){};xc.__name__=!0;Kb=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new C.IntMap;this._points=[];this.down=new M;this.move=new M;this.up=new M};Kb.__name__=!0;Kb.__interfaces__=[xc];Kb.prototype=
{submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),q.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit1(d))},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit1(a))},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new ec(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);
null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit1(d)}},__class__:Kb};ob=function(){};db=void 0;ob.__name__=!0;ob.__interfaces__=[eb];ob.prototype={__class__:ob};ja=function(){F.call(this);this._playback=new Nb(this)};ja.__name__=!0;ja.__interfaces__=[ob];ja.getInstance=function(){null==ja._instance&&(ja._instance=new ja);return ja._instance};ja.__super__=F;ja.prototype=j(F.prototype,{loop:function(){return this._playback},play:function(){return this._playback},
__class__:ja});db=function(){};db.__name__=!0;db.__interfaces__=[Ha];db.prototype={__class__:db};Nb=function(a){this._sound=a;this.volume=new T(0)};Nb.__name__=!0;Nb.__interfaces__=[db];Nb.prototype={dispose:function(){},set_paused:function(){return!0},__class__:Nb};Lb=function(){this.down=new M;this.move=new M;this.up=new M};Lb.__name__=!0;Lb.__interfaces__=[xc];Lb.prototype={__class__:Lb};rb=function(){this._entries=[]};rb.__name__=!0;rb.__interfaces__=[Ha];rb.prototype={dispose:function(){for(var a=
0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new hc.Entry(a,b,c))},__class__:rb};hc={Entry:function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c}};hc.Entry.__name__=!0;hc.Entry.prototype={__class__:hc.Entry};sb=function(){};sb.__name__=!0;sb.__interfaces__=
[kc];sb.prototype={__class__:sb};fb=function(){this._tickables=[]};fb.__name__=!0;fb.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_6;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(var d=a.firstComponent;null!=d;)c=d.next,d.onUpdate(b),d=c;for(d=a.firstChild;null!=d;)c=d.next,fb.updateEntity(d,b),d=c};fb.prototype={addTickable:function(a){this._tickables.push(a)},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),v.render(u.root,b),a.didRender())},
update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}u.volume.update(a);fb.updateEntity(u.root,a)}},__class__:fb};gc=function(){};gc.__name__=!0;gc.toButton=function(a){switch(a){case 0:return P.Left;case 1:return P.Middle;case 2:return P.Right}return P.Unknown(a)};Ob=function(){};Ob.__name__=!0;Ob.prototype={__class__:Ob};Pb=function(){};Pb.__name__=!0;Pb.prototype={__class__:Pb};e.CanvasGraphics=
function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d")};e.CanvasGraphics.__name__=!0;e.CanvasGraphics.__interfaces__=[sb];e.CanvasGraphics.prototype={onResize:function(){},didRender:function(){},willRender:function(){this._firstDraw=!0},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="destination-in";break;case 3:b=
"copy"}this._canvasCtx.globalCompositeOperation=b},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},drawSubImage:function(a,b,c,d,f,e,g){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(a,b,c,d,f,e,g),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,d|0,f|0,e|0,g|0,b|0,c|0,e|0,g|0)},drawImage:function(a,b,c){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawImage(a,
b,c),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,b|0,c|0)},restore:function(){this._canvasCtx.restore()},transform:function(a,b,c,d,f,e){this._canvasCtx.transform(a,b,c,d,f,e)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},save:function(){this._canvasCtx.save()},__class__:e.CanvasGraphics};e.CanvasRenderer=function(a){this.graphics=new e.CanvasGraphics(a);u.hasGPU.set__(!0)};
e.CanvasRenderer.__name__=!0;e.CanvasRenderer.__interfaces__=[Ob];e.CanvasRenderer.prototype={didRender:function(){this.graphics.didRender()},willRender:function(){this.graphics.willRender()},createCompressedTexture:function(){return null},getCompressedTextureFormats:function(){return[]},createTexture:function(a){return new e.CanvasTexture(e.CanvasRenderer.CANVAS_TEXTURES?e.HtmlUtil.createCanvas(a):a)},__class__:e.CanvasRenderer};e.CanvasTexture=function(a){this.pattern=this._graphics=null;F.call(this);
this.image=a};e.CanvasTexture.__name__=!0;e.CanvasTexture.__interfaces__=[vb];e.CanvasTexture.__super__=F;e.CanvasTexture.prototype=j(F.prototype,{onDisposed:function(){this._graphics=this.pattern=this.image=null},get_height:function(){return this.image.height},get_width:function(){return this.image.width},__class__:e.CanvasTexture});e.HtmlAssetPackLoader=function(a,b){Ra.call(this,a,b)};e.HtmlAssetPackLoader.__name__=!0;e.HtmlAssetPackLoader.detectImageFormats=function(a){var b=[g.PNG,g.JPG,g.GIF],
c=2,d=n.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(g.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var f=n.document.createElement("img");f.onload=f.onerror=function(){1==f.width&&b.unshift(g.JXR);--c;0==c&&a(b)};f.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
e.HtmlAssetPackLoader.detectAudioFormats=function(){var a=n.document.createElement("audio");if(null==a||null==G(a,a.canPlayType))return[];var b=new ib("\\b(iPhone|iPod|iPad|Android)\\b",""),c=n.window.navigator.userAgent;if(!e.WebAudioSound.get_supported()&&b.match(c))return[];for(var b=[{format:g.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:g.MP3,mimeType:"audio/mpeg"},{format:g.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:g.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:g.WAV,mimeType:"audio/wav"}],
c=[],d=0;d<b.length;){var f=b[d];++d;var h="";try{h=a.canPlayType(f.mimeType)}catch(j){}""!=h&&c.push(f.format)}return c};e.HtmlAssetPackLoader.supportsBlob=function(){if(e.HtmlAssetPackLoader._detectBlobSupport){e.HtmlAssetPackLoader._detectBlobSupport=!1;var a=new XMLHttpRequest;a.open("GET",".",!0);a.responseType="blob";if("blob"!=a.responseType)return!1;e.HtmlAssetPackLoader._URL=e.HtmlUtil.loadExtension("URL").value}return null!=e.HtmlAssetPackLoader._URL&&null!=e.HtmlAssetPackLoader._URL.createObjectURL};
e.HtmlAssetPackLoader.__super__=Ra;e.HtmlAssetPackLoader.prototype=j(Ra.prototype,{download:function(a,b,c,d){var f=this,e=new XMLHttpRequest,g=0,i=function(){g=Date.now();e.open("GET",a,!0);e.responseType=c;""==e.responseType&&(e.responseType="arraybuffer");e.send()},j=0;if("undefined"!=typeof e.onprogress){var m=4;e.onprogress=function(a){g=Date.now();f.handleProgress(b,a.loaded)};j=n.window.setInterval(function(){1<=e.readyState&&5E3<Date.now()-g&&(e.abort(),--m,0<m?i():(n.window.clearInterval(j),
f.handleError(b,"Request timed out")))},1E3)}e.onload=function(){n.window.clearInterval(j);var a=e.response;null==a?a=e.responseText:"blob"==c&&"arraybuffer"==e.responseType&&(a=new Blob([e.response]));d(a)};e.onerror=function(){n.window.clearInterval(j);f.handleError(b,"Failed to load asset: error #"+e.status)};i();return e},getAssetFormats:function(a){var b=this;null==e.HtmlAssetPackLoader._supportedFormats&&(e.HtmlAssetPackLoader._supportedFormats=new Tb,e.HtmlAssetPackLoader.detectImageFormats(function(a){e.HtmlAssetPackLoader._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(e.HtmlAssetPackLoader.detectAudioFormats()).concat([g.Data]))}));
e.HtmlAssetPackLoader._supportedFormats.get(a)},loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d=n.document.createElement("img"),f=new rb;f.addDisposingListener(d,"load",function(){e.HtmlAssetPackLoader.supportsBlob()&&e.HtmlAssetPackLoader._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTexture(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});f.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});
e.HtmlAssetPackLoader.supportsBlob()?this.download(a,b,"blob",function(a){d.src=e.HtmlAssetPackLoader._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(e.WebAudioSound.get_supported())this.download(a,b,"arraybuffer",function(a){e.WebAudioSound.ctx.decodeAudioData(a,function(a){c.handleLoad(b,
new e.WebAudioSound(a))},function(){c.handleLoad(b,ja.getInstance())})});else{var h=n.document.createElement("audio");h.preload="auto";var g=++e.HtmlAssetPackLoader._mediaRefCount;null==e.HtmlAssetPackLoader._mediaElements&&(e.HtmlAssetPackLoader._mediaElements=new C.IntMap);e.HtmlAssetPackLoader._mediaElements.set(g,h);f=new rb;f.addDisposingListener(h,"canplaythrough",function(){e.HtmlAssetPackLoader._mediaElements.remove(g);c.handleLoad(b,new e.HtmlSound(h))});f.addDisposingListener(h,"error",
function(){e.HtmlAssetPackLoader._mediaElements.remove(g);var a=h.error.code;3==a||4==a?c.handleLoad(b,ja.getInstance()):c.handleError(b,"Failed to load audio: "+h.error.code)});f.addListener(h,"progress",function(){if(0<h.buffered.length&&0<h.duration){var a=h.buffered.end(0)/h.duration;c.handleProgress(b,a*b.bytes|0)}});h.src=a;h.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new qb(a))})}},__class__:e.HtmlAssetPackLoader});e.HtmlMouse=function(a,b){ea.call(this,a);this._canvas=
b};e.HtmlMouse.__name__=!0;e.HtmlMouse.__super__=ea;e.HtmlMouse.prototype=j(ea.prototype,{__class__:e.HtmlMouse});e.HtmlSound=function(a){F.call(this);this.audioElement=a};e.HtmlSound.__name__=!0;e.HtmlSound.__interfaces__=[ob];e.HtmlSound.__super__=F;e.HtmlSound.prototype=j(F.prototype,{onDisposed:function(){this.audioElement=null},loop:function(a){null==a&&(a=1);return new e._HtmlSound.HtmlPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new e._HtmlSound.HtmlPlayback(this,a,!1)},__class__:e.HtmlSound});
e._HtmlSound={};e._HtmlSound.HtmlPlayback=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=n.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new T(b,function(){d.updateVolume()});this.updateVolume();this.playAudio();u.hidden._value&&this.set_paused(!0)};e._HtmlSound.HtmlPlayback.__name__=!0;e._HtmlSound.HtmlPlayback.__interfaces__=[Pb,db];e._HtmlSound.HtmlPlayback.prototype={updateVolume:function(){this._clonedElement.volume=
u.volume._value*this.volume._value},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(e.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=u.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=u.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);
return this._clonedElement.ended||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},__class__:e._HtmlSound.HtmlPlayback};bc=function(){};bc.__name__=!0;bc.prototype={__class__:bc};e.HtmlStage=function(a){var b=this;this._canvas=a;this.resize=new yb;this.scaleFactor=e.HtmlStage.computeScaleFactor();1!=this.scaleFactor&&(e.HtmlUtil.setVendorStyle(this._canvas,
"transform-origin","top left"),e.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));e.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(n.window.addEventListener("orientationchange",function(){e.HtmlUtil.callLater(G(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());n.window.addEventListener("resize",G(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new qa(null);null!=n.window.orientation&&(n.window.addEventListener("orientationchange",G(this,this.onOrientationChange),
!1),this.onOrientationChange(null));this.fullscreen=new qa(!1);e.HtmlUtil.addVendorListener(n.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};e.HtmlStage.__name__=!0;e.HtmlStage.__interfaces__=[bc];e.HtmlStage.computeScaleFactor=function(){var a=n.document.createElement("canvas").getContext("2d");e.HtmlUtil.loadExtension("backingStorePixelRatio",a);return 1};e.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==e.HtmlUtil.loadFirstExtension(["fullscreen",
"fullScreen","isFullScreen"],n.document).value)},onOrientationChange:function(){this.orientation.set__(e.HtmlUtil.orientation(n.window.orientation))},hideMobileBrowser:function(){var a=this,b=n.document.documentElement.style;b.height=n.window.innerHeight+100+"px";b.width=n.window.innerWidth+"px";b.overflow="visible";e.HtmlUtil.callLater(function(){e.HtmlUtil.hideMobileBrowser();e.HtmlUtil.callLater(function(){b.height=n.window.innerHeight+"px";a.onWindowResize(null)},100)})},resizeCanvas:function(a,
b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit0();return!0},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:e.HtmlStage};e.HtmlUtil=function(){};e.HtmlUtil.__name__=!0;e.HtmlUtil.callLater=function(a,
b){null==b&&(b=0);n.window.setTimeout(a,b)};e.HtmlUtil.hideMobileBrowser=function(){n.window.scrollTo(1,0)};e.HtmlUtil.loadExtension=function(a,b){null==b&&(b=n.window);var c=qc.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+q.substr(a,1,null),d=0,f=e.HtmlUtil.VENDOR_PREFIXES;d<f.length;){var h=f[d];++d;var g=h+c,i=qc.field(b,g);if(null!=i)return{prefix:h,field:g,value:i}}return{prefix:null,field:null,value:null}};e.HtmlUtil.loadFirstExtension=function(a,
b){for(var c=0;c<a.length;){var d=a[c];++c;d=e.HtmlUtil.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};e.HtmlUtil.polyfill=function(a,b){null==b&&(b=n.window);var c=e.HtmlUtil.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};e.HtmlUtil.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,f=e.HtmlUtil.VENDOR_PREFIXES;d<f.length;){var h=f[d];++d;a.setProperty("-"+h+"-"+b,c)}a.setProperty(b,c)};e.HtmlUtil.addVendorListener=function(a,b,c,d){for(var f=
0,h=e.HtmlUtil.VENDOR_PREFIXES;f<h.length;){var g=h[f];++f;a.addEventListener(g+b,c,d)}a.addEventListener(b,c,d)};e.HtmlUtil.orientation=function(a){switch(a){case -90:case 90:return Fa.Landscape;default:return Fa.Portrait}};e.HtmlUtil.createEmptyCanvas=function(a,b){var c=n.document.createElement("canvas");c.width=a;c.height=b;return c};e.HtmlUtil.createCanvas=function(a){var b=e.HtmlUtil.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,
0,0);c.restore();return b};e.HtmlUtil.detectSlowDriver=function(a){if(0<=n.navigator.platform.indexOf("Win")&&null!=n.window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};e.HtmlUtil.fixAndroidMath=function(){if(0<=n.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};e.WebAudioSound=function(a){F.call(this);
this.buffer=a};e.WebAudioSound.__name__=!0;e.WebAudioSound.__interfaces__=[ob];e.WebAudioSound.get_supported=function(){if(e.WebAudioSound._detectSupport){e.WebAudioSound._detectSupport=!1;var a=e.HtmlUtil.loadExtension("AudioContext").value;null!=a&&(e.WebAudioSound.ctx=new a,e.WebAudioSound.gain=e.WebAudioSound.ctx.createGainNode(),e.WebAudioSound.gain.connect(e.WebAudioSound.ctx.destination),u.volume.watch(function(a){e.WebAudioSound.gain.gain.value=a}))}return null!=e.WebAudioSound.ctx};e.WebAudioSound.__super__=
F;e.WebAudioSound.prototype=j(F.prototype,{onDisposed:function(){this.buffer=null},get_duration:function(){return this.buffer.duration},loop:function(a){null==a&&(a=1);return new e._WebAudioSound.WebAudioPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new e._WebAudioSound.WebAudioPlayback(this,a,!1)},__class__:e.WebAudioSound});e._WebAudioSound={};e._WebAudioSound.WebAudioPlayback=function(a,b,c){var d=this;this._sound=a;this._head=e.WebAudioSound.gain;this._sourceNode=e.WebAudioSound.ctx.createBufferSource();
this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.noteOn(0);this.playAudio();this.volume=new T(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);u.hidden._value&&this.set_paused(!0)};e._WebAudioSound.WebAudioPlayback.__name__=!0;e._WebAudioSound.WebAudioPlayback.__interfaces__=[Pb,db];e._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=e.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||
(e.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=u.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},setVolume:function(a){null==this._gainNode&&(this._gainNode=e.WebAudioSound.ctx.createGainNode(),this.insertNode(this._gainNode));this._gainNode.gain.value=
a},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return 3==this._sourceNode.playbackState||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},get_position:function(){return 3==this._sourceNode.playbackState?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(e.WebAudioSound.ctx.currentTime-this._startedAt)%this._sound.get_duration()},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=
this.get_position()):this.playAudio());return a},__class__:e._WebAudioSound.WebAudioPlayback};e.WebGLBatcher=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,1);a.enable(3042);a.pixelStorei(37441,1);
this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawImageShader=new y.DrawImageGL(a);this._drawPatternShader=new y.DrawPatternGL(a);this._fillRectShader=new y.FillRectGL(a);this.resize(16)};e.WebGLBatcher.__name__=!0;e.WebGLBatcher.prototype={resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);
for(var b=new Uint16Array(6*a),c=0;c<a;){var d=c++;b[6*d]=4*d;b[6*d+1]=4*d+1;b[6*d+2]=4*d+2;b[6*d+3]=4*d+2;b[6*d+4]=4*d+3;b[6*d+5]=4*d}this._gl.bufferData(34963,b,35044)}},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&(null!=this._lastRenderTarget?(this._gl.bindFramebuffer(36160,this._lastRenderTarget.framebuffer),this._gl.viewport(0,0,this._lastRenderTarget._width,this._lastRenderTarget._height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,
0,this._backbufferWidth,this._backbufferHeight)),this._currentRenderTarget=this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(0,770);break;case 3:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,
this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);this._lastShader==this._drawPatternShader&&this._drawPatternShader.setMaxUV(this._lastTexture.maxU,this._lastTexture.maxV);
this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},prepareQuad:function(a,b,c,d,f){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);f!=this._lastShader&&(this.flush(),this._lastShader=f);if(null!=d||null!=this._lastScissor)if(null==d||null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),this._lastScissor=null!=
d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},prepareDrawImage:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawImageShader)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},
deleteTexture:function(a){a==this._lastTexture&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},didRender:function(){this.flush()},willRender:function(){},resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},__class__:e.WebGLBatcher};e.WebGLGraphics=function(a,b){this._inverseProjection=
this._stateList=null;null==e.WebGLGraphics._scratchQuadArray&&(e.WebGLGraphics._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};e.WebGLGraphics.__name__=!0;e.WebGLGraphics.__interfaces__=[sb];e.WebGLGraphics.prototype={transformQuad:function(a,b,c,d){var c=a+c,d=b+d,f=e.WebGLGraphics._scratchQuadArray;f[0]=a;f[1]=b;f[2]=c;f[3]=b;f[4]=c;f[5]=d;f[6]=a;f[7]=d;this._stateList.matrix.transformArray(f,8,f);return f},onResize:function(a,b){this._stateList=new e._WebGLGraphics.DrawingState;
var c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new ta;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},didRender:function(){this._batcher.didRender()},willRender:function(){this._batcher.willRender()},applyScissor:function(a,b,c,d){var f=this._stateList,h=e.WebGLGraphics._scratchQuadArray;h[0]=a;h[1]=b;h[2]=a+c;h[3]=b+d;f.matrix.transformArray(h,4,h);this._inverseProjection.transformArray(h,4,h);a=h[0];b=
h[1];c=h[2]-a;d=h[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);f.applyScissor(a,b,c,d)},setBlendMode:function(a){this._stateList.blendMode=a},multiplyAlpha:function(a){this._stateList.alpha*=a},drawSubImage:function(a,b,c,d,f,e,g){var i=this._stateList,b=this.transformQuad(b,c,e,g),j=a._width,m=a._height,c=a.maxU*d/j,l=a.maxV*f/m,d=a.maxU*(d+e)/j,f=a.maxV*(f+g)/m,g=i.alpha,a=this._batcher.prepareDrawImage(this._renderTarget,i.blendMode,i.scissor,a),i=this._batcher.data;i[a]=b[0];i[++a]=b[1];i[++a]=c;i[++a]=
l;i[++a]=g;i[++a]=b[2];i[++a]=b[3];i[++a]=d;i[++a]=l;i[++a]=g;i[++a]=b[4];i[++a]=b[5];i[++a]=d;i[++a]=f;i[++a]=g;i[++a]=b[6];i[++a]=b[7];i[++a]=c;i[++a]=f;i[++a]=g},drawImage:function(a,b,c){this.drawSubImage(a,b,c,0,0,a.get_width(),a.get_height())},restore:function(){this._stateList=this._stateList.prev},transform:function(a,b,c,d,f,h){var g=this._stateList;e.WebGLGraphics._scratchMatrix.set(a,b,c,d,f,h);ta.multiply(g.matrix,e.WebGLGraphics._scratchMatrix,g.matrix)},rotate:function(a){var b=this._stateList.matrix,
a=3.141592653589793*a/180,c=Math.sin(a),a=Math.cos(a),d=b.m00,f=b.m10,e=b.m01,g=b.m11;b.m00=d*a+e*c;b.m10=f*a+g*c;b.m01=e*a-d*c;b.m11=g*a-f*c},translate:function(a,b){var c=this._stateList.matrix;c.m02+=c.m00*a+c.m01*b;c.m12+=c.m10*a+c.m11*b},save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new e._WebGLGraphics.DrawingState,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=
b},__class__:e.WebGLGraphics};e._WebGLGraphics={};e._WebGLGraphics.DrawingState=function(){this.scissor=this.prev=this.next=null;this.matrix=new ta;this.alpha=1;this.blendMode=L.Normal};e._WebGLGraphics.DrawingState.__name__=!0;e._WebGLGraphics.DrawingState.prototype={applyScissor:function(a,b,c,d){if(null!=this.scissor)var f=xa.max(this.scissor.x,a),e=xa.max(this.scissor.y,b),c=xa.min(this.scissor.x+this.scissor.width,a+c),d=xa.min(this.scissor.y+this.scissor.height,b+d),a=f,b=e,c=c-f,d=d-e;else this.scissor=
new w;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:e._WebGLGraphics.DrawingState};e.WebGLRenderer=function(a,b){var c=this;this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();u.hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init()},!1);a.resize.connect(G(this,this.onResize));this.init()};e.WebGLRenderer.__name__=!0;e.WebGLRenderer.__interfaces__=[Ob];e.WebGLRenderer.prototype={init:function(){this.batcher=
new e.WebGLBatcher(this.gl);this.graphics=new e.WebGLGraphics(this.batcher,null);this.onResize();u.hasGPU.set__(!0)},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},didRender:function(){this.graphics.didRender()},willRender:function(){this.graphics.willRender()},createCompressedTexture:function(){this.gl.isContextLost();return null},getCompressedTextureFormats:function(){return[]},createTexture:function(a){if(this.gl.isContextLost())return null;
var b=new e.WebGLTexture(this,a.width,a.height);b.uploadImageData(a);return b},__class__:e.WebGLRenderer};e.WebGLTexture=function(a,b,c){this.framebuffer=this._graphics=null;F.call(this);this._renderer=a;this._width=b;this._height=c;this._widthPow2=e.WebGLTexture.nextPowerOfTwo(b);this._heightPow2=e.WebGLTexture.nextPowerOfTwo(c);this.maxU=b/this._widthPow2;this.maxV=c/this._heightPow2;b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,
33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9728)};e.WebGLTexture.__name__=!0;e.WebGLTexture.__interfaces__=[vb];e.WebGLTexture.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};e.WebGLTexture.drawBorder=function(a,b,c){var d=a.getContext("2d");d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,0,c-1,b,1,0,c,b,1)};e.WebGLTexture.__super__=F;e.WebGLTexture.prototype=j(F.prototype,{get_height:function(){return this._height},get_width:function(){return this._width},
onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},uploadImageData:function(a){if(this._widthPow2!=a.width||this._heightPow2!=a.height){var b=e.HtmlUtil.createEmptyCanvas(this._widthPow2,this._heightPow2);b.getContext("2d").drawImage(a,0,0);e.WebGLTexture.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,
0,6408,6408,5121,a)},__class__:e.WebGLTexture});y={};y.ShaderGL=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,y.ShaderGL.createShader(a,35633,b));a.attachShader(this._program,y.ShaderGL.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};y.ShaderGL.__name__=!0;y.ShaderGL.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};y.ShaderGL.prototype=
{getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},prepare:function(){null},useProgram:function(){this._gl.useProgram(this._program)},__class__:y.ShaderGL};y.DrawImageGL=function(a){y.ShaderGL.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};y.DrawImageGL.__name__=!0;y.DrawImageGL.__super__=y.ShaderGL;y.DrawImageGL.prototype=j(y.ShaderGL.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);
this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},__class__:y.DrawImageGL});y.DrawPatternGL=function(a){y.ShaderGL.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec2 u_maxUV;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, mod(v_uv, u_maxUV)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_maxUV=this.getUniformLocation("u_maxUV");this.setTexture(0)};y.DrawPatternGL.__name__=!0;y.DrawPatternGL.__super__=
y.ShaderGL;y.DrawPatternGL.prototype=j(y.ShaderGL.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},setMaxUV:function(a,b){this._gl.uniform2f(this.u_maxUV,a,b)},setTexture:function(a){this._gl.uniform1i(this.u_texture,
a)},__class__:y.DrawPatternGL});y.FillRectGL=function(a){y.ShaderGL.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};
y.FillRectGL.__name__=!0;y.FillRectGL.__super__=y.ShaderGL;y.FillRectGL.prototype=j(y.ShaderGL.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:y.FillRectGL});lc=function(){this._transitor=null;this.scenes=
[];this.occludedScenes=[];this._root=new zb};Sb=void 0;mc=void 0;wb=void 0;Ga=void 0;nc=void 0;lc.__name__=!0;lc.__super__=W;lc.prototype=j(W.prototype,{playTransition:function(a,b,c,d){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new mc.Transitor(a,b,c,d),this._transitor.init(this)):(d(),this.invalidateVisibility())},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},invalidateVisibility:function(){for(var a=
this.scenes.length;0<a;){var b=this.scenes[--a],b=b._compMap.Scene_2;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];b=this.get_topScene();null!=b&&this.show(b)},show:function(a){a=a._compMap.Scene_2;null!=a&&a.shown.emit0()},hideAndDispose:function(a){this.hide(a);a.dispose()},hide:function(a){a=a._compMap.Scene_2;null!=a&&a.hidden.emit0()},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);q.remove(this.scenes,
a);this.scenes.push(a);this._root.addChild(a)},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},popScene:function(a){var b=this;this.completeTransition();
var c=this.get_topScene();if(null!=c){this.scenes.pop();var d=this.get_topScene();null!=d?this.playTransition(c,d,a,function(){b.hideAndDispose(c)}):(this.hideAndDispose(c),this.invalidateVisibility())}},pushScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();null!=d?this.playTransition(d,a,b,function(){c.hide(d)}):(this.add(a),this.invalidateVisibility())},get_name:function(){return"Director_5"},__class__:lc});mc={Transitor:function(a,b,c,d){this._from=a;this._to=b;
this._transition=c;this._onComplete=d}};mc.Transitor.__name__=!0;mc.Transitor.prototype={complete:function(){this._transition.complete();this._onComplete()},update:function(a){return this._transition.update(a)},init:function(a){this._transition.init(a,this._from,this._to)},__class__:mc.Transitor};wb=function(){};wb.__name__=!0;wb.prototype={complete:function(){},update:function(){return!0},init:function(a,b,c){this._director=a;this._from=b;this._to=c},__class__:wb};Ga=function(a,b){this._duration=
a;this._ease=null!=b?b:jc.linear};Ga.__name__=!0;Ga.__super__=wb;Ga.prototype=j(wb.prototype,{interp:function(a,b){return a+(b-a)*this._ease(this._elapsed/this._duration)},update:function(a){this._elapsed+=a;return this._elapsed>=this._duration},init:function(a,b,c){wb.prototype.init.call(this,a,b,c);this._elapsed=0},__class__:Ga});Sb=function(a,b){Ga.call(this,a,b)};Sb.__name__=!0;Sb.__super__=Ga;Sb.prototype=j(Ga.prototype,{complete:function(){this._to._compMap.Sprite_4.alpha.set__(1)},update:function(a){a=
Ga.prototype.update.call(this,a);this._to._compMap.Sprite_4.alpha.set__(this.interp(0,1));return a},init:function(a,b,c){Ga.prototype.init.call(this,a,b,c);a=this._to._compMap.Sprite_4;null==a&&this._to.add(a=new v);a.alpha.set__(0)},__class__:Sb});nc=function(){};nc.__name__=!0;nc.__super__=W;nc.prototype=j(W.prototype,{get_name:function(){return"Scene_2"},__class__:nc});zc=function(){};zc.__name__=!0;zc.set=function(a,b,c){return c?a|b:a&~b};Tb=function(){this.success=new M;this.error=new M;this.progressChanged=
new yb;this.hasResult=!1;this._total=this._progress=0};Tb.__name__=!0;Tb.prototype={set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit0());return a},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit0());return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit1(a);
return a},__class__:Tb};yb=function(a){U.call(this,a)};yb.__name__=!0;yb.__super__=U;yb.prototype=j(U.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:yb});oc={Task:function(a){this.next=null;this.fn=a}};oc.Task.__name__=!0;oc.Task.prototype={__class__:oc.Task};V=function(){};V.__name__=!0;V.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?q.substr(a,b+1,null):null};V.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?q.substr(a,
0,b):a};V.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=q.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=q.substr(a,b+1,null));return V.getFileExtension(a)};V.joinPath=function(a,b){47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};V.withFields=function(a,b){var c=b.length;if(0<c){for(var a=a+(0<a.length?" [":"["),d=0;d<c;){0<d&&(a+=", ");var f=b[d],e=b[d+1];if(x.__instanceof(e,Error)){var g=e.stack;null!=g&&(e=g)}a+=f+"="+B.string(e);d+=2}a+="]"}return a};Ia=void 0;C=void 0;Ac=void 0;
Gc=void 0;C={IntMap:function(){this.h={}}};C.IntMap.__name__=!0;C.IntMap.__interfaces__=[Ic];C.IntMap.prototype={remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty(a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},__class__:C.IntMap};C.StringMap=function(){this.h={}};C.StringMap.__name__=!0;C.StringMap.__interfaces__=[Ic];C.StringMap.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},
next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return q.iter(a)},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:C.StringMap};Gc={Bytes:function(){}};Gc.Bytes.__name__=!0;Ac={Meta:function(){}};Ac.Meta.__name__=!0;Ac.Meta.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};Ia={Parser:function(){}};
Ia.Parser.__name__=!0;Ia.Parser.parse=function(a){var b=p.createDocument();Ia.Parser.doParse(a,0,b);return b};Ia.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,f=1,e=1,g=null,i=0,j=0,m=0,l=a.charCodeAt(b),k=new rc;l==l;){switch(f){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:f=e;continue}break;case 1:switch(l){case 60:f=0;e=2;break;default:i=b;f=13;continue}break;case 13:60==l?(f=p.createPCData(k.b+q.substr(a,i,b-i)),k=new rc,c.addChild(f),j++,f=0,e=2):38==l&&(k.addSub(a,
i,b-i),f=18,e=13,i=b+1);break;case 17:93==l&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(f=p.createCData(q.substr(a,i,b-i)),c.addChild(f),j++,b+=2,f=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=q.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;f=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=q.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;f=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";
b+=2;f=15}i=b+1;break;case 63:f=14;i=b;break;case 47:if(null==c)throw"Expected node name";i=b+1;f=0;e=10;break;default:f=3;i=b;continue}break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(b==i)throw"Expected node name";d=p.createElement(q.substr(a,i,b-i));c.addChild(d);f=0;e=4;continue}break;case 4:switch(l){case 47:f=11;j++;break;case 62:f=9;j++;break;default:f=5;i=b;continue}break;case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||
45==l)){if(i==b)throw"Expected attribute name";g=q.substr(a,i,b-i);if(d.exists(g))throw"Duplicate attribute";f=0;e=6;continue}break;case 6:switch(l){case 61:f=0;e=7;break;default:throw"Expected =";}break;case 7:switch(l){case 34:case 39:f=8;i=b;break;default:throw'Expected "';}break;case 8:l==a.charCodeAt(i)&&(e=q.substr(a,i+1,b-i-1),d.set(g,e),f=0,e=4);break;case 9:i=b=Ia.Parser.doParse(a,b,d);f=1;break;case 11:switch(l){case 62:f=1;break;default:throw"Expected >";}break;case 12:switch(l){case 62:return 0==
j&&c.addChild(p.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(i==b)throw"Expected node name";if(q.substr(a,i,b-i)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";f=0;e=12;continue}break;case 15:45==l&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(p.createComment(q.substr(a,i,b-i))),b+=2,f=1);break;case 16:91==l?m++:93==l?m--:62==l&&0==m&&(c.addChild(p.createDocType(q.substr(a,i,b-i))),f=
1);break;case 14:63==l&&62==a.charCodeAt(b+1)&&(b++,f=q.substr(a,i+1,b-i-2),c.addChild(p.createProcessingInstruction(f)),f=1);break;case 18:59==l&&(i=q.substr(a,i,b-i),35==i.charCodeAt(0)?(i=120==i.charCodeAt(1)?B.parseInt("0"+q.substr(i,1,i.length-1)):B.parseInt(q.substr(i,1,i.length-1)),k.b+=B.string(String.fromCharCode(i))):k.b=Ia.Parser.escapes.exists(i)?k.b+B.string(Ia.Parser.escapes.get(i)):k.b+B.string("&"+i+";"),i=b+1,f=e)}l=a.charCodeAt(++b)}1==f&&(i=b,f=13);if(13==f)return(b!=i||0==j)&&
c.addChild(p.createPCData(k.b+q.substr(a,i,b-i))),b;throw"Unexpected end";};x=function(){};x.__name__=!0;x.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,f=a.length;d<f;)var e=d++,c=2!=e?c+(","+x.__string_rec(a[e],b)):c+x.__string_rec(a[e],b);return c+")"}d=a.length;c="[";b+="\t";
for(f=0;f<d;)e=f++,c+=(0<e?",":"")+x.__string_rec(a[e],b);return c+"]"}try{f=a.toString}catch(g){return"???"}if(null!=f&&f!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;f=null;c="{\n";b+="\t";d=null!=a.hasOwnProperty;for(f in a)if(!d||a.hasOwnProperty(f))"prototype"==f||"__class__"==f||"__super__"==f||"__interfaces__"==f||"__properties__"==f||(2!=c.length&&(c+=", \n"),c+=b+f+" : "+x.__string_rec(a[f],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";
case "string":return a;default:return""+a}};x.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,f=c.length;d<f;){var e=d++,e=c[e];if(e==b||x.__interfLoop(e,b))return!0}return x.__interfLoop(a.__super__,b)};x.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Oc:return(a|0)===a;case Kc:return"number"==typeof a;case Lc:return"boolean"==typeof a;case String:return"string"==typeof a;case Pc:return!0;default:if(null!=a){if("function"==
typeof b){if(a instanceof b)return b==Array?null==a.__enum__:!0;if(x.__interfLoop(a.__class__,b))return!0}}else return!1;return b==Qc&&null!=a.__name__||b==Rc&&null!=a.__ename__?!0:a.__enum__==b}};x.__cast=function(a,b){if(x.__instanceof(a,b))return a;throw"Cannot cast "+B.string(a)+" to "+B.string(b);};pc={_CanvasElement:{}};pc._CanvasElement.CanvasUtil=function(){};pc._CanvasElement.CanvasUtil.__name__=!0;pc._CanvasElement.CanvasUtil.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<
d.length;){var f=d[c];++c;f=a.getContext(f,b);if(null!=f)return f}return null};var Ab,ua,Bb,Ta,Cb,kb,E,Db,Ub,Dc,sc,Eb;Ab=function(){z.call(this)};Ab.__name__=!0;Ab.create=function(){var a=new Ab;return null!=a&&a.init()?a:null};Ab.__super__=z;Ab.prototype=j(z.prototype,{backCallback:function(){var a=O.create();a.addChild(ua.create());t.getInstance().replaceScene(a)},init:function(){var a=!1;z.prototype.init.call(this)&&(this.addChild(m.create("Sample/loading"),0,1),a=fa.getInstance().addImage("Sample/menuTitle"),
a=m.createWithTexture(a,new w(0,36,100,34)),null==a&&null,a.setCenterAnchor(),a.setPosition(160,60),this.addChild(a),a=Z.create("Go back","Sample/arial-14"),a=la.create(a,G(this,this.backCallback),this),a=H.create([a]),a.alignVerticallyWithPadding(0),a.setPosition(134,300),this.addChild(a),a=!0);return a},__class__:Ab});Bb=function(a,b,c){this.zOrder=3E3;this.hp=1;this.active=!0;m.call(this);c=ka.NORMAL;this.parentType=tc.PLAYER;this.yVelocity=a;this.xVelocity=0;this.attackMoke=c;"W2.png"==b?this.initWithFile("Sample/w2"):
this.initWithFile("Sample/bullet1")};Bb.__name__=!0;Bb.__super__=m;Bb.prototype=j(m.prototype,{collideRect:function(){var a=this.getPosition();return new w(a.x-3,a.y-3,6,6)},hurt:function(){this.hp--},destroy:function(){var a=m.create("Sample/hit");a.setPosition(this.getPosition().x,this.getPosition().y+20);this.setRotation(360*Math.random());a.setScale(0.75);this.getParent().addChild(a);q.remove(r.ENEMY_BULLETS,this);q.remove(r.PLAYER_BULLETS,this);this.removeFromParent(!0);var b=S.create(G(a,a.removeFromParentAndCleanup),
a);a.runAction(sa.create(0.3,2,2));a.runAction(K.create([wa.create(0.3),b]))},update:function(a){m.prototype.update.call(this,a);var b=this.getPosition();b.x-=this.xVelocity*a;b.y-=this.yVelocity*a;this.setPosition(b.x,b.y);(-100>b.y||600<b.y||!this.active)&&this.destroy();0>=this.hp&&(this.active=!1)},__class__:Bb});Ta=function(){};Ta.__name__=!0;Ta.flareEffect=function(a,b,c){Ta._parent=a;Ta._target=b;var d=m.create("Sample/flare");d.setBlendFunc(L.Add);a.addChild(d,10);d.setOpacity(255);d.setPosition(-30,
183);d.setRotation(-120);d.setScale(0.2);d.setCenterAnchor();var f=Pa.create(0.5,255),e=Pa.create(1,0),g=sa.create(0.7,1.2,1.2),g=Na.create(g),i=$.create(0.5,new o(328,0));Na.create(i);var j=Ea.create(2.5,90),j=Za.create(j),k=da.create(0.5,1),c=S.create(c,b),l=S.create(function(){a.removeChild(b,!0)},d);d.runAction(K.create([f,g,e,l,c]));d.runAction(i);d.runAction(j);d.runAction(k)};Ta.spark=function(a,b,c,d){Ta._parent=b;null==c&&(c=0.3);null==d&&(d=0.5);var f=m.create("Sample/explode1"),e=m.create("Sample/explode2"),
g=m.create("Sample/explode3");f.setBlendFunc(L.Add);e.setBlendFunc(L.Add);g.setBlendFunc(L.Add);f.setPosition(a.x,a.y);e.setPosition(a.x,a.y);g.setPosition(a.x,a.y);b.addChild(f);b.addChild(e);b.addChild(g);f.setScale(c);e.setScale(c);g.setScale(c);f.setCenterAnchor();e.setCenterAnchor();g.setCenterAnchor();g.setRotation(360*Math.random());var a=Ea.create(d,-45),b=Ea.create(d,45),c=sa.create(d,3,3),i=sa.create(d,3,3),j=sa.create(d,3,3),k=wa.create(d),l=wa.create(d),d=wa.create(d);f.runAction(a);e.runAction(b);
f.runAction(c);e.runAction(i);g.runAction(j);f.runAction(K.create([k,S.create(G(f,f.removeFromParentAndCleanup),f)]));e.runAction(K.create([l,S.create(G(e,e.removeFromParentAndCleanup),e)]));g.runAction(K.create([d,S.create(G(g,g.removeFromParentAndCleanup),g)]))};Cb=function(a){this._timeTick=0;this.zOrder=3E3;this.scoreValue=200;this.hp=15;this.bulletSpeed=-200;this.active=!0;m.call(this);this.moveType=a.moveType;this.hp=a.HP;this.scoreValue=a.scoreValue;this.attackMode=a.attackMode;this.initWithSpriteFrameName(a.textureName);
this.delayTime=1+1.2*Math.random();this.schedule(G(this,this.shoot),this.delayTime)};Cb.__name__=!0;Cb.sharedEnemy=function(){ga.getInstance().addSpriteFrames("Sample/Enemy.plist")};Cb.__super__=m;Cb.prototype=j(m.prototype,{collideRect:function(){var a=this.getContentSize(),b=this.getPosition();return new w(b.x,b.y-a.height/4,a.width,a.height/2)},hurt:function(){this.hp--},shoot:function(){var a=this.getPosition(),b=new Bb(this.bulletSpeed,"W2.png",this.attackMode);r.ENEMY_BULLETS.push(b);this.getParent().addChild(b,
b.zOrder,Ka.ENEMY_BULLET);b.setPosition(a.x,a.y-0.2*this.getContentSize().height)},destroy:function(){r.SCORE+=this.scoreValue;var a=new kb;a.setPosition(this.getPosition().x-38,this.getPosition().y-45);this.getParent().addChild(a);Ta.spark(new o(this.getPosition().x+20,this.getPosition().y),this.getParent(),1.2,0.7);Ja.ArrayRemoveObject_sample_Enemy(r.ENEMIES,this);this.removeFromParent(!0)},update:function(a){m.prototype.update.call(this,a);var b=this.getPosition();if(0>=this.hp||0>b.x||b.x>E.winSize.width||
-50>b.y||600<b.y)this.active=!1,this.destroy();this._timeTick+=a;0.1<this._timeTick&&(this._timeTick=0)},__class__:Cb});kb=function(){m.call(this);this.initWithSpriteFrame(ga.getInstance().getSpriteFrame("explosion_01.png"));var a=this.getContentSize();this.tmpHeight=a.height;this.tmpWidth=a.width;a=ra.getInstance().getAnimation("Explosion");this.runAction(K.create([Oa.create(a),S.create(G(this,this.destroy),this)]))};kb.__name__=!0;kb.sharedExplosion=function(){ga.getInstance().addSpriteFrames("Sample/explosion.plist");
for(var a="",b=[],c=1;35>c;)a=c++,a="explosion_"+(10>a?"0"+B.string(a):B.string(a))+".png",a=ga.getInstance().getSpriteFrame(a),b.push(a);b=mb.createWithAnimationFrames(b,0.04);ra.getInstance().addAnimation(b,"Explosion")};kb.__super__=m;kb.prototype=j(m.prototype,{destroy:function(){this.getParent().removeChild(this,!0)},__class__:kb});E=function(){this._backgroundSpeed=-192;this._time=this._tmpScore=0;z.call(this)};E.__name__=!0;E.create=function(){var a=new E;return null!=a&&a.init()?a:null};E.__super__=
z;E.prototype=j(z.prototype,{onMainMenu:function(){var a=O.create();a.addChild(ua.create());t.getInstance().replaceScene(a)},onGameOver:function(){var a=O.create();a.addChild(Db.create());t.getInstance().replaceScene(a)},movingBackground:function(){this._backSky.runAction($.create(3,new o(0,-192)));this._backSkyHeight+=this._backgroundSpeed;this._backSkyHeight<=E.winSize.height&&(this._isBackSkyReload||(this._backSkyRe=m.create("Sample/bg01"),this._backSkyRe.setAnchorPoint(new o(0,0)),this.addChild(this._backSkyRe,
-10),this._backSkyRe.setPosition(0,E.winSize.height),this._isBackSkyReload=!0,null!=this._temp&&this.removeChild(this._temp,!1)),this._backSkyRe.runAction($.create(3,new o(0,this._backgroundSpeed))));0>=this._backSkyHeight&&(this._backSkyHeight=this._backSky.getContentSize().height,this._temp=this._backSky,this._backSky=this._backSkyRe,this._backSkyRe=null,this._isBackSkyReload=!1)},initBackground:function(){this._backSky=m.create("Sample/bg01");this._backSky.setAnchorPoint(new o(0,0));this._backSkyHeight=
this._backSky.getContentSize().height;this.addChild(this._backSky,-10);E.winSize=this._backSky.getContentSize();this.schedule(G(this,this.movingBackground),3)},collide:function(a,b){return J.rectIntersectsRect(a,b)?!0:!1},updateUI:function(){this._tmpScore<r.SCORE&&(this._tmpScore+=5);this._lbLife.setString(B.string(r.LIFE));this.lbScore.setString("Score: "+this._tmpScore)},checkIsReborn:function(){0<r.LIFE&&!this._ship.active?(this._ship=new Ub,this.addChild(this._ship,this._ship.zOrder,Ka.PLAYER)):
0>=r.LIFE&&null!=this._ship&&!this._ship.active&&(this.runAction(K.create([Qa.create(0.2),S.create(G(this,this.onGameOver),this)])),this._ship=null)},removeInactiveUnit:function(){this.getChildren();null!=this._ship&&!this._ship.active&&this._ship.destroy()},checkIsCollide:function(){for(var a,b,c=[],d=[],f=[],e=0,g=r.ENEMIES.length;e<g;){var i=e++;a=r.ENEMIES[i];for(var j=0,k=r.PLAYER_BULLETS.length;j<k;){var l=j++;b=r.PLAYER_BULLETS[l];null!=b&&this.collide(a.collideRect(),b.collideRect())&&(d.push(l),
f.push(i))}null!=this._ship&&this.collide(a.collideRect(),this._ship.collideRect())&&this._ship.active&&(a.hurt(),this._ship.hurt())}for(g=0;g<d.length;)i=d[g],++g,r.PLAYER_BULLETS[i].hurt();for(g=0;g<f.length;)i=f[g],++g,r.ENEMIES[i].hurt();e=0;for(g=r.ENEMY_BULLETS.length;e<g;)i=e++,a=r.ENEMY_BULLETS[i],null!=a&&null!=this._ship&&this.collide(a.collideRect(),this._ship.collideRect())&&this._ship.active&&(c.push(i),this._ship.hurt());for(g=0;g<c.length;)i=c[g],++g,null!=r.ENEMY_BULLETS[i]&&r.ENEMY_BULLETS[i].hurt()},
update:function(a){z.prototype.update.call(this,a);this.checkIsCollide();this.removeInactiveUnit(a);this.checkIsReborn();this.updateUI()},processEvent:function(a){this._state==E.STATE_PLAYING&&null!=this._ship&&this._ship.setPosition(a.getLocation().x,a.getLocation().y)},onPointerDragged:function(a){this.processEvent(a);return z.prototype.onPointerMoved.call(this,a)},onPointerMoved:function(a){this.processEvent(a);return z.prototype.onPointerMoved.call(this,a)},scoreCounter:function(){if(this._state==
E.STATE_PLAYING){this._time++;var a=this._time/60|0,b=this._time%60;9<a?B.string(a):B.string(a);9<b?B.string(b):B.string(b);this._levelManager.loadLevelResource(this._time)}},init:function(){this.registerWithTouchDispatcher();if(z.prototype.init.call(this)){r.ENEMIES=[];r.ENEMY_BULLETS=[];r.PLAYER_BULLETS=[];r.SCORE=0;r.LIFE=4;this._state=E.STATE_PLAYING;kb.sharedExplosion();Cb.sharedEnemy();this._levelManager=new Dc(this);E.winSize=t.getInstance().getWinSize();this._state=E.STATE_PLAYING;this._beginPos=
new o(0,0);this._isBackSkyReload=!1;this.initBackground();this.screenRect=new w(0,0,E.winSize.width,E.winSize.height);this.lbScore=Z.create("Score: 0","Sample/arial-14");this.addChild(this.lbScore,4E3);this.lbScore.setPosition(240,0);var a=fa.getInstance().addImage("Sample/ship01"),a=m.createWithTexture(a,new w(0,0,60,38));a.setScale(0.6);a.setPosition(0,0);this.addChild(a,4E3,5);this._lbLife=Z.create("0","Sample/arial-14");this._lbLife.setPosition(40,0);this.addChild(this._lbLife,4E3);this._ship=
new Ub;this.addChild(this._ship,this._ship.zOrder,Ka.PLAYER);a=Z.create("Main Menu","Sample/arial-14");a=la.create(a,G(this,this.onMainMenu),this);a=H.create([a]);a.setPosition(240,450);this.addChild(a,4E3);this.schedule(G(this,this.scoreCounter),1)}return!0},__class__:E});Db=function(){z.call(this)};Db.__name__=!0;Db.create=function(){var a=new Db;return null!=a&&a.init()?a:null};Db.__super__=z;Db.prototype=j(z.prototype,{onPlayAgain:function(){var a=O.create();a.addChild(E.create());t.getInstance().replaceScene(a)},
init:function(){var a=this,b=!1;if(z.prototype.init.call(this)){b=m.create("Sample/loading");b.setAnchorPoint(new o(0,0));this.addChild(b,0,1);b=m.create("Sample/gameOver");b.setAnchorPoint(new o(0,0));b.setPosition(0,80);this.addChild(b,10,1);var b=m.create("Sample/menu",new w(378,0,126,33)),c=m.create("Sample/menu",new w(378,33,126,33)),d=m.create("Sample/menu",new w(378,66,126,33)),f=m.create("Sample/cocos2d-html5");f.setCenterAnchor();f.setPosition(160,380);this.addChild(f,10);b=va.create(b,c,
d,function(){Ta.flareEffect(a,a,G(a,a.onPlayAgain))},this);b=H.create([b]);this.addChild(b,1,2);b.setPosition(97,250);b=Z.create("Your Score:"+r.SCORE,"Sample/arial-14");b.setScale(2);b.setCenterAnchor();b.setPosition(160,200);this.addChild(b,10);r.SOUND&&aa.getInstance().playMusic("Sample/Music/mainMainMusic");b=!0}return b},__class__:Db});Dc=function(a){if(null==a)throw"gameLayer must be non-nil";this._currentLevel=lb.initLevel1();this._gameLayer=a;this.setLevel(this._currentLevel);X.create()};
Dc.__name__=!0;Dc.prototype={addEnemyToGameLayer:function(a){if(null!=this._gameLayer._ship){var a=new Cb(X.ENEMY_TYPE_LIST[a]),b=new o(Math.random()*E.winSize.width,0),c=a.getContentSize();a.setPosition(b.x,b.y);var d=ba.create();switch(a.moveType){case Y.ATTACK:b=this._gameLayer._ship.getPosition();d=ca.create(1,b);break;case Y.VERTICAL:b=new o(0,E.winSize.height+c.height);d=$.create(4,b);break;case Y.HORIZONTAL:b=new o(0,E.winSize.height+c.height);d=$.create(4,b);break;case Y.OVERLAP:c=b.x<=E.winSize.width/
2?320:-320,b=$.create(4,new o(c,240)),c=$.create(4,new o(-c,320)),d=K.create([b,c])}this._gameLayer.addChild(a,a.zOrder,Ka.ENEMY);r.ENEMIES.push(a);x.__instanceof(d,K)?(b=x.__cast(d,K),a.runAction(b)):x.__instanceof(d,ca)?(b=x.__cast(d,ca),a.runAction(b)):x.__instanceof(d,$)&&(b=x.__cast(d,$),a.runAction(b))}},loadLevelResource:function(a){for(var b=0,c=this._currentLevel.enemies.length;b<c;){var d=this._currentLevel.enemies[b++];if(null!=d&&"Once"!=d.showType&&"Repeate"==d.showType&&0==a%B.parseInt(d.showTime))for(var f=
0,e=d.types.length;f<e;){var g=f++;this.addEnemyToGameLayer(d.types[g])}}},_minuteToSecond:function(a){if(null==a)return"0";a=a.split(":");return 1==a.length?B.string(B.parseInt(a[0])):B.string(60*B.parseInt(a[0])+B.parseInt(a[1]))},setLevel:function(a){for(var b=0,a=a.enemies.length;b<a;){var c=b++;this._currentLevel.enemies[c].showTime=this._minuteToSecond(this._currentLevel.enemies[c].showTime)}},__class__:Dc};sc=function(){};sc.__name__=!0;sc.main=function(){u.init();var a=ia.build("bootstrap");
u._platform.loadAssetPack(a).get(sc.onSuccess)};sc.onSuccess=function(a){jb.pack=a;t.getInstance().runWithScene(ua.scene())};Eb=function(){z.call(this)};Eb.__name__=!0;Eb.create=function(){var a=new Eb;return null!=a&&a.init()?a:null};Eb.__super__=z;Eb.prototype=j(z.prototype,{backCallback:function(){var a=O.create();a.addChild(ua.create());t.getInstance().replaceScene(a)},soundControl:function(){r.SOUND=r.SOUND?!1:!0;r.SOUND||aa.getInstance().stopMusic()},init:function(){var a=!1;if(z.prototype.init.call(this)){this.addChild(m.create("Sample/loading"),
0,1);a=fa.getInstance().addImage("Sample/menuTitle");a=m.createWithTexture(a,new w(0,0,134,34));a.setCenterAnchor();a.setPosition(160,60);this.addChild(a);a=Z.create("Sound","Sample/arial-14");a.setScale(2);a=la.create(a);a.setEnabled(!1);var b=Z.create("On","Sample/arial-14"),c=Z.create("Off","Sample/arial-14"),b=Ua.create([la.create(b),la.create(c)]);b.setCallback(G(this,this.soundControl),this);a=H.create([a,b]);this.addChild(a);a.alignVerticallyWithPadding(30);a.setPosition(140,200);a=Z.create("Go back",
"Sample/arial-14");a=la.create(a,G(this,this.backCallback),this);a=H.create([a]);a.setPosition(134,360);this.addChild(a);a=!0}return a},__class__:Eb});Ub=function(){this.zOrder=3E3;this.canBeAttack=!0;this.hp=5;this.bulletSpeed=900;var a=this;m.call(this);this.appearPosition=new o(160,440);var b=fa.getInstance().addImage("Sample/ship01");this.initWithTexture(b,new w(0,0,60,38));this.setPosition(this.appearPosition.x,this.appearPosition.y);this.active=!0;var c=Aa.createWithTexture(b,new w(0,0,60,38),
!1,new o(0,0),new N),d=Aa.createWithTexture(b,new w(60,0,60,38),!1,new o(0,0),new N),f=[];f.push(c);f.push(d);c=mb.createWithAnimationFrames(f,0.1);c=Oa.create(c);this.runAction(ab.create(c));this.schedule(G(this,this.shoot),1/6);this.canBeAttack=!1;var e=m.createWithTexture(b,new w(0,45,60,38));e.setCenterAnchor();e.setScale(8);e.setPosition(30,24);this.addChild(e,3E3,99999);e.runAction(K.create([da.create(0.5,1,1),S.create(function(){a.removeChild(e,!0)},this)]));b=bb.create(3,9);c=S.create(function(){a.canBeAttack=
!0;a.setVisible(!0)},this);this.runAction(K.create([Qa.create(0.5),b,c]))};Ub.__name__=!0;Ub.__super__=m;Ub.prototype=j(m.prototype,{collideRect:function(){var a=this.getPosition(),b=this.getContentSize();return new w(a.x,a.y,b.width,b.height)},hurt:function(){this.canBeAttack&&this.hp--},destroy:function(){r.LIFE--;var a=this.getPosition(),b=this.getParent(),c=new kb;b.removeChild(this,!0);c.setPosition(a.x,a.y);r.SOUND&&aa.getInstance().playEffect("Sample/Music/shipDestroyEffect")},shoot:function(){this.getContentSize();
var a=new Bb(this.bulletSpeed,"W1.png",ka.NORMAL),b=this.getPosition();r.PLAYER_BULLETS.push(a);a.setPosition(b.x+13,b.y-10+0.3*this.getContentSize().height);this.getParent().addChild(a);a=new Bb(this.bulletSpeed,"W1.png",ka.NORMAL);a.setPosition(b.x+39,b.y-10+0.3*this.getContentSize().height);this.getParent().addChild(a);r.PLAYER_BULLETS.push(a)},update:function(a){m.prototype.update.call(this,a);0>=this.hp&&(this.active=!1)},__class__:Ub});ua=function(){z.call(this)};ua.__name__=!0;ua.create=function(){var a=
new ua;return null!=a&&a.init()?a:null};ua.scene=function(){var a=O.create(),b=ua.create();a.addChild(b);return a};ua.__super__=z;ua.prototype=j(z.prototype,{onButtonEffect:function(){r.SOUND&&aa.getInstance().playEffect("Sample/Music/buttonEffect")},onAbout:function(){this.onButtonEffect();var a=O.create();a.addChild(Ab.create());t.getInstance().replaceScene(a)},onSettings:function(){this.onButtonEffect();var a=O.create();a.addChild(Eb.create());t.getInstance().replaceScene(a)},onNewGame:function(){var a=
O.create();a.addChild(E.create());t.getInstance().replaceScene(cb.create(1.2,a))},init:function(){var a=this,b=!1;if(z.prototype.init.call(this)){this.winSize=t.getInstance().getWinSize();E.winSize=this.winSize;b=m.create("Sample/logo");b.setPosition(0,100);this.addChild(b,10,2);this.addChild(m.create("Sample/loading"),1,1);var c=m.create("Sample/menu",new w(0,0,126,33)),d=m.create("Sample/menu",new w(0,33,126,33)),f=m.create("Sample/menu",new w(0,66,126,33)),e=m.create("Sample/menu",new w(126,0,
126,33)),g=m.create("Sample/menu",new w(126,33,126,33)),i=m.create("Sample/menu",new w(126,66,126,33)),b=m.create("Sample/menu",new w(252,0,126,33)),j=m.create("Sample/menu",new w(252,33,126,33)),k=m.create("Sample/menu",new w(252,66,126,33)),c=va.create(c,d,f,function(){a.onButtonEffect();Ta.flareEffect(a,a,G(a,a.onNewGame))},this),e=va.create(e,g,i,G(this,this.onSettings),this),b=va.create(b,j,k,G(this,this.onAbout),this),b=H.create([c,e,b]);b.alignVerticallyWithPadding(10);b.setCenterAnchor();
b.setPosition(97,250);this.addChild(b,6,2);b=!0;r.SOUND&&(aa.getInstance().set__musicVolume(0.7),aa.getInstance().playMusic("Sample/Music/mainMainMusic",!0))}return b},__class__:ua});X=function(a,b,c,d,e,g,j){this.HP=1;this.type=0;this.type=a;this.textureName=b;this.bulletType=c;this.HP=d;this.moveType=e;this.attackMode=g;this.scoreValue=j};ka=void 0;tc=void 0;r=void 0;Ka=void 0;lb=void 0;Y=void 0;Fb=void 0;X.__name__=!0;X.create=function(){if(null==X.ENEMY_TYPE_LIST){X.ENEMY_TYPE_LIST=[];var a=new X(0,
"E0.png","W2.png",1,Y.ATTACK,ka.NORMAL,15),b=new X(1,"E1.png","W2.png",2,Y.ATTACK,ka.NORMAL,40),c=new X(2,"E2.png","W2.png",4,Y.HORIZONTAL,ka.TSUIHIKIDAN,60),d=new X(3,"E3.png","W2.png",6,Y.OVERLAP,ka.NORMAL,80),e=new X(4,"E4.png","W2.png",10,Y.HORIZONTAL,ka.TSUIHIKIDAN,150),g=new X(5,"E5.png","W2.png",20,Y.HORIZONTAL,ka.NORMAL,200);X.ENEMY_TYPE_LIST=[a,b,c,d,e,g]}return X.ENEMY_TYPE_LIST};X.prototype={__class__:X};r=function(){};r.__name__=!0;Y=function(){};Y.__name__=!0;tc=function(){};tc.__name__=
!0;Ka=function(){};Ka.__name__=!0;ka=function(){};ka.__name__=!0;lb=function(){};lb.__name__=!0;lb.initLevel1=function(){var a=new lb;a.enemies=[];var b=new Fb;b.showType="Repeate";b.showTime="00:02";b.types=[0,1,2];a.enemies.push(b);b=new Fb;b.showType="Repeate";b.showTime="00:05";b.types=[3,4,5];a.enemies.push(b);return a};lb.prototype={__class__:lb};Fb=function(){};Fb.__name__=!0;Fb.prototype={__class__:Fb};var Nc=0;Array.prototype.indexOf&&(q.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;
a.splice(c,1);return!0});Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.prototype.__class__=Array;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var Oc={__name__:["Int"]},Pc={__name__:["Dynamic"]},Kc=Number;Kc.__name__=["Float"];var Lc=Boolean;
Lc.__ename__=["Bool"];var Qc={__name__:["Class"]},Rc={};p.Element="element";p.PCData="pcdata";p.CData="cdata";p.Comment="comment";p.DocType="doctype";p.ProcessingInstruction="processingInstruction";p.Document="document";t.DIRECTOR_PROJECTION_3D=1;t.DIRECTOR_PROJECTION_DEFAULT=t.DIRECTOR_PROJECTION_3D;t.defaultFPS=60;t.firstUseDirector=!0;ba.ACTION_TAG_INVALID=-1;D.NODE_TAG_INVALID=-1;H.MENU_STATE_WAITING=0;H.MENU_STATE_TRACKING_TOUCH=1;H.MENU_HANDLER_PRIORITY=-128;s.CURRENT_ITEM=-1061138431;s.ZOOM_ACTION_TAG=
-1061138430;s.NORMAL_TAG=8801;s.SELECTED_TAG=8802;s.DISABLE_TAG=8803;uc.NODE_TRANSFORM_USING_AFFINE_MATRIX=1;vc.UINT_MAX=-1;v._scratchPoint=new o;I.POINTER_DOWN=0;I.POINTER_UP=3;I.POINTER_MOVED=1;I._prePoint=new o(0,0);e.HtmlPlatform.instance=new e.HtmlPlatform;U.DISPATCHING_SENTINEL=new hb(null,null);u.root=new zb;u.uncaughtError=new M;u.hidden=new qa(!1);u.hasGPU=new qa(!1);u.volume=new T(1);u._platform=e.HtmlPlatform.instance;u._calledInit=!1;n.window="undefined"!=typeof window?window:null;n.document=
"undefined"!=typeof window?window.document:null;n.navigator="undefined"!=typeof window?window.navigator:null;ia.__meta__={obj:{assets:[{bootstrap:[{bytes:12553,md5:"1a9b75c3ed8979ef2312847a1c19257d",name:"Sample/arial-14.fnt"},{bytes:39873,md5:"16567b2fa767e5bcff4769cebad114d4",name:"Sample/arial-14.png"},{bytes:17484,md5:"27a583b25df2374ec6fd50de337ffd9c",name:"Sample/bg01.jpg"},{bytes:1648,md5:"2cb6a4efa13957d4ffc32ec3fdc90f0f",name:"Sample/bullet.plist"},{bytes:1443,md5:"cc8a4fa8101e0f5f57858ed22bfe6a89",
name:"Sample/bullet.png"},{bytes:1058,md5:"46f2e95b40000d30b4346687271764e0",name:"Sample/bullet1.png"},{bytes:16572,md5:"500057c6bacfcc1e7746a35f1417dd27",name:"Sample/cocos2d-html5.png"},{bytes:3472,md5:"83b824a8c17fd3ea07f17275788941fc",name:"Sample/Enemy.plist"},{bytes:25623,md5:"eaeb5bccd45c830d9030973393416d5b",name:"Sample/Enemy.png"},{bytes:2143,md5:"a802dec71fb2e009cd56fe7f38a51b8f",name:"Sample/explode1.jpg"},{bytes:2630,md5:"3718d50faae859ba3c8ba6dc03ae4818",name:"Sample/explode2.jpg"},
{bytes:2521,md5:"f439bc5b5b622959369da1e26d6eb40e",name:"Sample/explode3.jpg"},{bytes:17282,md5:"aa9d033c41db323849a5cc87b1e0fa48",name:"Sample/explosion.plist"},{bytes:207311,md5:"5a37504f335b0bdfb6b0711c08f72d5f",name:"Sample/explosion.png"},{bytes:25365,md5:"93bb3e71fa0a75066682ca370c935d3f",name:"Sample/flare.jpg"},{bytes:29415,md5:"de21d28bdfa2121420892224b03e1376",name:"Sample/gameOver.png"},{bytes:2755,md5:"592f9ea85bc45eb962e1fd903c1e2af6",name:"Sample/hit.png"},{bytes:165747,md5:"ec3a961a645c5b94c3b39572532aa43c",
name:"Sample/loading.png"},{bytes:60102,md5:"1fad9922cf63e6d6811af200bc583f2c",name:"Sample/logo.png"},{bytes:24742,md5:"be7bf63e07c09816b4f317f27a4c02a4",name:"Sample/menu.png"},{bytes:14805,md5:"a90c9b20e3b1a97c93a3a03c01ff2c8e",name:"Sample/menuTitle.png"},{bytes:2023932,md5:"600be0100f2f3f1abe91bc52fc502c0e",name:"Sample/Music/bgMusic.mp3"},{bytes:863372,md5:"b164e5493f577973eefa8ad0a15e109f",name:"Sample/Music/bgMusic.ogg"},{bytes:8535,md5:"ba4412bd2f1b47d1e5a3f779aa90bfaa",name:"Sample/Music/buttonEffect.mp3"},
{bytes:14800,md5:"8a0e4ba979bbcd58c4eec535410c0767",name:"Sample/Music/buttonEffect.ogg"},{bytes:3959,md5:"7bd9f62227e4db2a5562a6d4c4070905",name:"Sample/Music/explodeEffect.mp3"},{bytes:8701,md5:"5897e7553e456c6e9b44c7c062b48f0e",name:"Sample/Music/explodeEffect.ogg"},{bytes:2191,md5:"172ef539027ec8415de9fc68ed524441",name:"Sample/Music/fireEffect.mp3"},{bytes:6998,md5:"234b197ac92b8812f27f7a53db5352f1",name:"Sample/Music/fireEffect.ogg"},{bytes:765708,md5:"4d42b47e45ef26d03421bf48b0860d4a",name:"Sample/Music/mainMainMusic.mp3"},
{bytes:364578,md5:"7921d9da8a3d6a2cb7c8e746f7000e5a",name:"Sample/Music/mainMainMusic.ogg"},{bytes:23199,md5:"cb925f4ab255e4ca8189b0e1f7c0372e",name:"Sample/Music/shipDestroyEffect.mp3"},{bytes:28723,md5:"4da7c6b473f45104684e7a6128d45f69",name:"Sample/Music/shipDestroyEffect.ogg"},{bytes:11411,md5:"d61385eeb0342fb4f7e90ab455a9e019",name:"Sample/ship01.png"},{bytes:583,md5:"ca1b2fba5e61b2bfe2b73974d6079240",name:"Sample/w2.png"}]}]}};var Sc=ia,Mc;Mc=(new ib("\\b(Android)\\b","")).match(n.window.navigator.userAgent)?
!1:null!=(new XMLHttpRequest).withCredentials;Sc._supportsCrossOrigin=Mc;gb.NEWLINE=new Rb(10);ea._sharedEvent=new cc;Q._sharedEvent=new dc;e.CanvasRenderer.CANVAS_TEXTURES=(new ib("(iPhone|iPod|iPad)","")).match(n.window.navigator.userAgent);e.HtmlAssetPackLoader._mediaRefCount=0;e.HtmlAssetPackLoader._detectBlobSupport=!0;e.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];e.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=n.window.top==n.window&&(new ib("Mobile(/.*)? Safari","")).match(n.navigator.userAgent);
e.WebAudioSound._detectSupport=!0;e.WebGLGraphics._scratchMatrix=new ta;Ia.Parser.escapes=function(){var a=new C.StringMap;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);E.STATE_PLAYING=0;r.LIFE=1;r.SCORE=0;r.SOUND=!0;r.ENEMIES=[];r.ENEMY_BULLETS=[];r.PLAYER_BULLETS=[];Y.ATTACK=0;Y.VERTICAL=1;Y.HORIZONTAL=2;Y.OVERLAP=3;tc.PLAYER=1;Ka.ENEMY_BULLET=900;Ka.ENEMY=1E3;Ka.PLAYER=1E3;ka.NORMAL=1;ka.TSUIHIKIDAN=2;
sc.main()})();
